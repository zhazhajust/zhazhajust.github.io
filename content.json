{"posts":[{"title":"åˆ†æ²»ç®—æ³•","text":"é—®é¢˜ç»™ä½ ä¸€ä¸ªç”±æ•°å­—å’Œè¿ç®—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸² expression ï¼ŒæŒ‰ä¸åŒä¼˜å…ˆçº§ç»„åˆæ•°å­—å’Œè¿ç®—ç¬¦ï¼Œè®¡ç®—å¹¶è¿”å›æ‰€æœ‰å¯èƒ½ç»„åˆçš„ç»“æœã€‚ä½ å¯ä»¥ æŒ‰ä»»æ„é¡ºåº è¿”å›ç­”æ¡ˆã€‚ ç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹æ»¡è¶³å…¶å¯¹åº”è¾“å‡ºå€¼ç¬¦åˆ 32 ä½æ•´æ•°èŒƒå›´ï¼Œä¸åŒç»“æœçš„æ•°é‡ä¸è¶…è¿‡ (10^4) ã€‚ ç¤ºä¾‹12345è¾“å…¥ï¼šexpression = &quot;2-1-1&quot;è¾“å‡ºï¼š[0,2]è§£é‡Šï¼š((2-1)-1) = 0 (2-(1-1)) = 2 è§£é¢˜æ€è·¯å¯¹äºä¸€ä¸ªå½¢å¦‚ x op yï¼ˆop ä¸ºè¿ç®—ç¬¦ï¼Œx å’Œ y ä¸ºæ•°ï¼‰ çš„ç®—å¼è€Œè¨€ï¼Œå®ƒçš„ç»“æœç»„åˆå–å†³äº x å’Œ y çš„ç»“æœç»„åˆæ•°ï¼Œè€Œ x å’Œ y åˆå¯ä»¥å†™æˆå½¢å¦‚ x op y çš„ç®—å¼ã€‚ å› æ­¤ï¼Œè¯¥é—®é¢˜çš„å­é—®é¢˜å°±æ˜¯ x op y ä¸­çš„ x å’Œ yï¼šä»¥è¿ç®—ç¬¦åˆ†éš”çš„å·¦å³ä¸¤ä¾§ç®—å¼è§£ã€‚ ç„¶åæˆ‘ä»¬æ¥è¿›è¡Œ åˆ†æ²»ç®—æ³•ä¸‰æ­¥èµ°ï¼š åˆ†è§£ï¼šæŒ‰è¿ç®—ç¬¦åˆ†æˆå·¦å³ä¸¤éƒ¨åˆ†ï¼Œåˆ†åˆ«æ±‚è§£è§£å†³ï¼šå®ç°ä¸€ä¸ªé€’å½’å‡½æ•°ï¼Œè¾“å…¥ç®—å¼ï¼Œè¿”å›ç®—å¼è§£åˆå¹¶ï¼šæ ¹æ®è¿ç®—ç¬¦åˆå¹¶å·¦å³ä¸¤éƒ¨åˆ†çš„è§£ï¼Œå¾—å‡ºæœ€ç»ˆè§£ 123456789101112131415161718192021222324252627282930313233class Solution {public: vector&lt;int&gt; diffWaysToCompute(string expression) { vector&lt;int&gt; vec1, vec2, res; int flag = 0; int n = expression.size(); for(int i = 0; i &lt; n; i++){ char oper = expression[i]; if(oper == '+' || oper == '-' || oper == '*'){ flag = 1; vec1 = diffWaysToCompute(string(expression, 0, i)); vec2 = diffWaysToCompute(string(expression, i + 1, n - i - 1)); for(auto v1: vec1){ for(auto v2: vec2){ if(oper == '+'){ res.push_back(v1 + v2); }else if(oper == '-'){ res.push_back(v1 - v2); }else{ res.push_back(v1 * v2); } } } } } if(flag == 0){ return {std::stoi(expression)}; } return res; }}; ä»¥åŠpythonç‰ˆæœ¬ 1234567891011121314151617181920212223242526class Solution: def diffWaysToCompute(self, input: str) -&gt; List[int]: # å¦‚æœåªæœ‰æ•°å­—ï¼Œç›´æ¥è¿”å› if input.isdigit(): return [int(input)] res = [] for i, char in enumerate(input): if char in ['+', '-', '*']: # 1.åˆ†è§£ï¼šé‡åˆ°è¿ç®—ç¬¦ï¼Œè®¡ç®—å·¦å³ä¸¤ä¾§çš„ç»“æœé›† # 2.è§£å†³ï¼šdiffWaysToCompute é€’å½’å‡½æ•°æ±‚å‡ºå­é—®é¢˜çš„è§£ left = self.diffWaysToCompute(input[:i]) right = self.diffWaysToCompute(input[i+1:]) # 3.åˆå¹¶ï¼šæ ¹æ®è¿ç®—ç¬¦åˆå¹¶å­é—®é¢˜çš„è§£ for l in left: for r in right: if char == '+': res.append(l + r) elif char == '-': res.append(l - r) else: res.append(l * r) return res","link":"/2022/07/01/Divide-and-Conquer/"},{"title":"ç‰›é¡¿è¿­ä»£æ³•éšå¼æ¬§æ‹‰æ³•æ±‚è§£å¾®åˆ†æ–¹ç¨‹","text":"ç‰›é¡¿è¿­ä»£æ³•æ±‚è§£ODEé¦–å…ˆæ ¹æ® (\\frac{dy}{dx} = f(x, y)) æ„å»º (F(x, y) = 0)ï¼Œç„¶åæ±‚è§£(F(x, y))å¯¹(y)çš„å¯¼æ•°ï¼Œç„¶åè¿­ä»£æ±‚è§£é›¶ç‚¹è¯¯å·® (\\text{abs}(F(x, y) - F(x, \\text{next}_y))) æœ€å°å¤„çš„(y)ï¼Œå°†(\\text{next}_y)ä½œä¸º(y)å¸¦å…¥ä¸‹ä¸€ä¸ªé€’å½’ï¼Œ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566import matplotlib.pyplot as pltimport numpy as npimport sympyx = np.zeros(20)y = np.zeros(20)y_E = np.zeros(20)z = np.zeros(20)x[0] = 0y[0] = 1y_E[0] = 1z[0] = (1+2*x[0])**0.5h = 0.05# dy/dx å¯¼æ•°def f(x, y): return y-2*x/y################################# ç‰›é¡¿è¿­ä»£æ³•æ„å»ºæ–¹ç¨‹ ################################## dy/dx = f(x, y)# y - yn = (x - xn) * f(x, y)# h * f(x, y) - (y - yn) = 0def F(x, y, yn): return h * f(x, y) - (y - yn)# æ±‚è§£dF(x, y, yn)/dy# d(0.05 * (y - 2*x/y) - y + yn) / dy# 0.05 * (1 + 2*x/y**2) - 1# 0.1 * x/y**2 - 0.95def dF(x, y): return 0.1*x/y**2 - 0.95####################################################################################def newtonMethod(assum, d1, d3): y = assum Next_y = 0 if F(d1, y, d3) == 0.0: return y else: Next_y = y - F(d1, y, d3) / dF(d1, y) # é›¶ç‚¹è·ç¦» if abs(F(d1, y, d3) - F(d1, Next_y, d3)) &lt; 1e-5: return Next_y '''è®¾ç½®è¿­ä»£è·³å‡ºæ¡ä»¶, åŒæ—¶è¾“å‡ºæ»¡è¶³f(x) = 0çš„xå€¼''' else: return newtonMethod(Next_y, d1, d3)for i in range(1, 20): x[i] = x[i-1]+h y[i] = newtonMethod(4, x[i], y[i-1]) y_E[i] = y_E[i-1] + h*f(x[i-1], y_E[i-1]) z[i] = (1+2*x[i])**0.5plt.plot(x, y, label='Implicit Euler', color='green')plt.plot(x, y_E, label='Euler', color='orange')plt.plot(x, z, label='true', color='red')plt.legend()plt.show()","link":"/2022/08/16/NewtonMethod/"},{"title":"åæ»¤æ³¢","text":"ä½¿ç”¨å‚…é‡Œå¶å˜æ¢å»å·ç§¯å’Œé€†æ»¤æ³¢å¦‚æœå·²ç»æœ‰äº†ä¸€å¼ å…·æœ‰æ¨¡ç³Šæ ¸çš„æ¨¡ç³Šå›¾åƒï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶æ¢å¤åˆ°åŸå§‹å›¾åƒã€‚åŸç†ä¸Šï¼Œæˆ‘ä»¬åªéœ€è¦å¯¹åŸæœ‰çš„æ»¤æ³¢å·ç§¯æ ¸æ¯ä¸€ä¸ªå€¼è¿›è¡Œå€’æ•°çš„æ“ä½œå³å¯å®ç°é€†æ»¤æ³¢å™¨çš„æ•ˆæœã€‚åœ¨æ­¤æˆ‘ä»¬ä»ç„¶æ˜¯åœ¨é¢‘åŸŸä¸Šè¿›è¡Œå·ç§¯ï¼Œä»£ç å¦‚ä¸‹ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå·ç§¯æ ¸å–åˆ°æ•°çš„è¿‡ç¨‹ä¸­éœ€è¦åœ¨åŸæ¥çš„æ•°å€¼ä¸ŠåŠ ä¸€ä¸ªå¾®å°æ•°å€¼epsilonï¼Œä»¥é¿å…åˆ†æ¯ä¸ºé›¶ã€‚ 12345678910111213141516171819202122im = EyEnd #255*rgb2gray(imread('./images/snow.jpg'))gauss_kernel = np.outer(signal.gaussian(im.shape[0], 3), signal.gaussian(im.shape[1], 3)) freq = fp.fft2(im)freq_kernel = fp.fft2(fp.ifftshift(gauss_kernel))conv = freq*freq_kernelim_blur = fp.ifft2(conv).realim_blur = 255*im_blur/np.max(im_blur) epsilon = 10**-6freq = fp.fft2(im_blur)freq_kernel = 1/(epsilon+freq_kernel) # avoid freq_kernel is zeroim_rst = fp.ifft2(conv).realim_rst = 255*im_rst/np.max(im_rst) pylab.figure(figsize = (10, 6))pylab.subplot(221), pylab.imshow(im), pylab.title('Original Image'), pylab.axis('off')pylab.subplot(222), pylab.imshow(im_blur), pylab.title('Blurred Image Image'), pylab.axis('off')pylab.subplot(223), pylab.imshow(im_rst), pylab.title('Restored Image with inverse filter'), pylab.axis('off')pylab.subplot(224), pylab.imshow(im_rst - im), pylab.title('Diff Image'), pylab.axis('off') åˆ©ç”¨ç»´çº³æ»¤æ³¢å™¨å»å·ç§¯å‰é¢çš„å»å·ç§¯æ–¹æ³•éœ€è¦å·²çŸ¥æ¨¡ç³Šæ ¸ï¼Œåœ¨è¿™é‡Œä½¿ç”¨ç»´çº³æ»¤æ³¢å™¨ï¼Œåœ¨ä¸çŸ¥é“æ¨¡ç³Šæ ¸çš„æƒ…å†µä¸‹ï¼Œä»æŸåçš„ä¿¡å·ä¸­å»é™¤å™ªå£°ï¼Œè¾¾åˆ°å¤åŸå›¾åƒçš„ç›®çš„ã€‚é¦–å…ˆæ„é€ ä¸€ä¸ªå·²ç»æŸåäº†çš„å›¾åƒã€‚ 12345678im = rgb2gray(imread('./images/cat.jpg')) n = 7psf = np.ones((n, n))/n**2im1 = signal.convolve2d(im, psf, mode = 'same')im1 += 0.1*np.std(im1)*np.random.standard_normal(im.shape) å†ä½¿ç”¨ç»´çº³æ»¤æ³¢å®Œæˆæ“ä½œï¼Œæœ€åå°±èƒ½å¾—åˆ°å›¾åƒ 1234567891011im2, _ = restoration.unsupervised_wiener(im1, psf)fig, axes = pylab.subplots(nrows = 1, ncols = 3, figsize = (200, 40), sharex = True, sharey = True)pylab.gray()axes[0].imshow(im), axes[0].axis('off'), axes[0].set_title('Original image', size = 200)axes[1].imshow(im1), axes[1].axis('off'), axes[1].set_title('Noisy blurred image', size = 200)axes[2].imshow(im2), axes[2].axis('off'), axes[2].set_title('Self tuned restoration', size = 200)fig.tight_layout()pylab.show() ä½¿ç”¨ä½é€šæ»¤æ³¢ï¼Œé‡å»ºå›¾åƒ12345678910111213141516im_fft = fp.ifftshift(im_fft_shift)im = np.clip(fp.ifft2(im_fft).real, 0, 255)pylab.figure(figsize = (10,10))pylab.imshow(im,pylab.cm.gray), pylab.axis('off'), pylab.title('Noise image'), pylab.show()keep_fraction = 0.1r,c = im_fft.shapeim_fft[int(r*keep_fraction):int(r*(1-keep_fraction))] = 0im_fft[:, int(c*keep_fraction):int(c*(1-keep_fraction))] = 0pylab.figure(), plot_spectrum(fp.fftshift(im_fft)), pylab.title('Filitered Spectrum')im_new = fp.ifft2(im_fft).realpylab.figure(figsize = (10, 10))pylab.imshow(im_new,pylab.cm.gray), pylab.axis('off'), pylab.title('Reconstructed image'), pylab.show()","link":"/2022/07/05/antiFilter/"},{"title":"EPOCH Code For Spectrum","text":"Use EPOCH Code to get axis spectrum SDF_WriteUse this syntex can save axis Ey to file: 123CALL sdf_write_plain_variable(sdf_handle, id, name, units, dims, stagger, &amp; grid_id, variable,subtype_field, subarray_field) The parameters have the following types and meanings: block id - The id name of the variable. This character string is a unique identifier for the variable in the file enabling a program to retrieve it later. Once defined it should not change so that newer versions of EPOCH can still identify variables generated by older versions. name - The display name of the variable. This character string is the name that is used by external programs to display an identifying name for the variable. If it contains â€˜/â€˜ characters then these are used by VisIt to group the variables. units - The units of the variable. This character string is used when displaying the data units. For most variables in EPOCH these are SI units. dims - An nD integer array containing the GLOBAL length of the variable across all processors. In EPOCH a variable actually called â€œdimsâ€ exists for variables which are the same size as the default field variables. stagger - An integer constant containing the stagger of a variable from the cell centre of a cell. This property lets external programs know the position of a variable on the grid. grid id - The id name of the grid to which the variable is attached. In EPOCH , the main grid is just called â€œgridâ€. Note that this property is case sensitive. variable - The actual variable to be written to disk. subtype field - This is an MPI type representing the layout of the data across the processors. For a standard field variable, there is an automatically created type called â€œsubtype fieldâ€ which should be used here. subarray field - This is an MPI type representing the section of the â€œvariableâ€ parameter to be written. For a standard field variable, there is an automatically created type called â€œsubarray fieldâ€ which should be used here. ExampleFor Example, derived variables array 123456IF (IAND(dumpmask(c_dump_myvar), code)) THEN CALL calc_my_variable(array) CALL sdf_write_plain_variable(sdf_handle, â€™my_varâ€™, â€™Mine/variableâ€™, â€™unitâ€™, dims, c_stagger_cell_centre, â€™gridâ€™, array, subtype_field, subarray_field)ENDIF Cent Specextract the central ey and save to sdf by subroutine sdf_write_plain_variable(â€¦)","link":"/2022/06/30/centspec/"},{"title":"Cloudflare tunnel å†…ç½‘ç©¿é€","text":"https://cloudflared.cn/get-started/create-local-tunnel/ Cloudflare å®ç°å†…ç½‘ç©¿é€ä¸»è¦é€šè¿‡å…¶ Cloudflare Tunnelï¼ˆä¹Ÿå« Argo Tunnelï¼‰åŠŸèƒ½æ¥å®ç°ã€‚å®ƒå…è®¸ä½ åœ¨ä¸æš´éœ²å…¬å…± IP çš„æƒ…å†µä¸‹ï¼Œå°†æœ¬åœ°æœåŠ¡å™¨æˆ–åº”ç”¨æš´éœ²åˆ°äº’è”ç½‘ä¸Šï¼Œä»è€Œå®ç°å†…ç½‘ç©¿é€ã€‚ä»¥ä¸‹æ˜¯ Cloudflare Tunnel çš„åŸºæœ¬å·¥ä½œåŸç†å’Œæ­¥éª¤ï¼š å·¥ä½œåŸç†ï¼š Cloudflare Tunnel åˆ›å»ºäº†ä¸€ä¸ªä»æœ¬åœ°æœåŠ¡å™¨åˆ° Cloudflare çš„åŠ å¯†éš§é“ã€‚ä½ çš„åº”ç”¨æˆ–æœåŠ¡è¿è¡Œåœ¨å†…ç½‘ä¸­ï¼Œä½†å®ƒé€šè¿‡è¿™ä¸ªéš§é“è¿æ¥åˆ° Cloudflare çš„ç½‘ç»œã€‚ Cloudflare ç½‘ç»œ æ¥æ”¶åˆ°æ¥è‡ªç”¨æˆ·è¯·æ±‚çš„æµé‡ï¼Œç„¶åè½¬å‘åˆ°æœ¬åœ°æœåŠ¡å™¨ã€‚ ç”¨æˆ·ä¸æœ¬åœ°æœåŠ¡è¿›è¡Œäº¤äº’æ—¶ï¼Œæ•°æ®æµç»è¿‡åŠ å¯†éš§é“ä¼ è¾“ï¼Œä»è€Œé¿å…äº†æš´éœ²å†…ç½‘ IP åœ°å€å’Œç«¯å£ã€‚ å®ç°æ­¥éª¤ï¼š æ³¨å†Œ Cloudflare è´¦æˆ·å¹¶æ·»åŠ åŸŸåï¼š å¦‚æœè¿˜æ²¡æœ‰ Cloudflare è´¦æˆ·ï¼Œé¦–å…ˆå» Cloudflare å®˜ç½‘ æ³¨å†Œä¸€ä¸ªã€‚ å°†ä½ çš„åŸŸåæ·»åŠ åˆ° Cloudflareï¼Œå¹¶ä¿®æ”¹ DNS è®¾ç½®ï¼ˆå¦‚æœæ˜¯ç°æœ‰åŸŸåï¼‰ã€‚ å®‰è£… Cloudflare Tunnel å®¢æˆ·ç«¯ï¼š åœ¨ä½ çš„æœ¬åœ°æœåŠ¡å™¨ä¸Šå®‰è£… cloudflared å®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥é€šè¿‡ Cloudflare çš„å®˜æ–¹æ–‡æ¡£ äº†è§£è¯¦ç»†çš„å®‰è£…è¿‡ç¨‹ã€‚å¤§è‡´æ­¥éª¤ï¼š åœ¨ Linux ä¸Šï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š12wget https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64.debsudo dpkg -i cloudflared-linux-amd64.deb å¯¹äºæ²¡æœ‰sudoæƒé™çš„æ™®é€šç”¨æˆ·1wget https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64 ä¹Ÿå¯ä»¥åœ¨ macOSã€Windows ç­‰å…¶ä»–å¹³å°ä¸Šè¿›è¡Œç±»ä¼¼å®‰è£…ã€‚ è®¤è¯ Cloudflare Tunnelï¼š åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œè¿›è¡Œè®¤è¯ï¼š1cloudflared tunnel login è¯¥å‘½ä»¤ä¼šæ‰“å¼€ä¸€ä¸ªæµè§ˆå™¨çª—å£ï¼Œè¦æ±‚ä½ ç™»å½•åˆ° Cloudflare è´¦æˆ·å¹¶æˆæƒã€‚ åˆ›å»º Tunnelï¼š åˆ›å»ºä¸€ä¸ªæ–°çš„ Tunnelï¼š1cloudflared tunnel create &lt;tunnel-name&gt; è¿™ä¼šç”Ÿæˆä¸€ä¸ªéš§é“ ID å’Œè¯ä¹¦æ–‡ä»¶ã€‚ é…ç½® Tunnel ä»£ç†ï¼š è®¾ç½®éš§é“ä»£ç†ï¼Œé€šå¸¸æ˜¯åœ¨æœ¬åœ°åº”ç”¨ç›‘å¬çš„ç«¯å£ä¸Šã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ çš„æœåŠ¡åœ¨ localhost:8080 ä¸Šè¿è¡Œï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å°†æµé‡é€šè¿‡éš§é“è½¬å‘ï¼š1cloudflared tunnel --url http://localhost:8080 æˆ–è€…ä¹Ÿå¯ä»¥ç›´æ¥æ›´æ”¹é…ç½®æ–‡ä»¶â€~/.cloudflared/config.ymlâ€ 1234567tunnel: 6bc4c976-1c0c-45a4-bab0-93b7eed4e1d1 # ä½ çš„ Tunnel IDcredentials-file: /home/yujq2/.cloudflared/6bc4c976-1c0c-45a4-bab0-93b7eed4e1d1.jsoningress:- hostname: rentereview.cn service: http://localhost:8080 # ä½ çš„ Web æœåŠ¡ç›‘å¬ç«¯å£- service: http_status:404 ç„¶åè¿è¡Œ 1cloudflared tunnel run &lt;tunnel-name&gt; é…ç½® DNS å’Œè·¯ç”±ï¼š åœ¨ Cloudflare æ§åˆ¶é¢æ¿ä¸­ï¼Œé…ç½®ä½ çš„ DNS è®¾ç½®ï¼Œå°†åŸŸåæŒ‡å‘ cloudflare-tunnelã€‚ åœ¨ Cloudflare çš„ DNS é…ç½®ä¸­ï¼Œæ·»åŠ ä¸€æ¡ CNAME è®°å½•ï¼Œå°†å­åŸŸï¼ˆä¾‹å¦‚ tunnel.yourdomain.comï¼‰æŒ‡å‘ tunnel.cloudflare.comã€‚ æ€»ç»“ä¸€ä¸‹ åœ¨ Cloudflare æ§åˆ¶é¢æ¿ä¸­ï¼Œé€šè¿‡ DNS è®¾ç½®ï¼Œæ‰‹åŠ¨æ·»åŠ ä¸€ä¸ª CNAME è®°å½•ï¼Œå°†å­åŸŸï¼ˆå¦‚ tunnel.retereview.cnï¼‰æŒ‡å‘ your-tunnel-id.cfargotunnel.comã€‚ ç¡®ä¿ä½ çš„ Cloudflare Tunnel åœ¨æœ¬åœ°å¯åŠ¨å¹¶è¿è¡Œã€‚ ç­‰å¾… DNS è®°å½•ç”Ÿæ•ˆåï¼Œä½ åº”è¯¥å°±å¯ä»¥é€šè¿‡è®¿é—® tunnel.retereview.cn æ¥è®¿é—®ä½ æœ¬åœ°çš„æœåŠ¡äº†ã€‚ æˆ–è€…é€šè¿‡cloudflaredç¨‹åºè¿›è¡Œè·¯ç”± 1cloudflared tunnel route dns jayzquaz rentereview.cn è¿™å°†æŠŠåŸŸå retereview.cn è·¯ç”±åˆ°åä¸º jayzquaz çš„ Tunnelã€‚ å¯åŠ¨å’ŒéªŒè¯ï¼š è¿è¡Œ Cloudflare Tunnel æœåŠ¡ï¼š1cloudflared tunnel run &lt;tunnel-name&gt; æ­¤æ—¶ï¼Œä½ çš„æœ¬åœ°æœåŠ¡å°±å·²ç»é€šè¿‡ Cloudflare Tunnel æš´éœ²åˆ°äº’è”ç½‘ä¸Šäº†ã€‚ æŒä¹…åŒ–æœåŠ¡ï¼ˆä½¿ç”¨ systemdï¼‰ ä»¥ä¸Šæ­¥éª¤ä¸­è¿è¡Œ cloudflared tunnel run çš„æ–¹å¼åœ¨ç»ˆç«¯é€€å‡ºåå°±ä¼šåœæ­¢ï¼Œä¸ºäº†è®©æœåŠ¡åœ¨åå°æŒç»­è¿è¡Œï¼Œå¯ä»¥ä½¿ç”¨ systemd æ¥ç®¡ç†ã€‚ æ–¹æ³•ä¸€ï¼šä½¿ç”¨ systemd åˆ›å»ºæœåŠ¡ï¼ˆæ¨èï¼‰ åˆ›å»ºæœåŠ¡æ–‡ä»¶ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨åˆ›å»ºæœåŠ¡æ–‡ä»¶ï¼š 1sudo nano /etc/systemd/system/cloudflared-tunnel.service æœåŠ¡æ–‡ä»¶å†…å®¹å°†ä»¥ä¸‹å†…å®¹å¤åˆ¶åˆ°æ–‡ä»¶ä¸­ï¼Œæ³¨æ„æ›¿æ¢ &lt;tunnel-name&gt; ä¸ºä½ çš„éš§é“åç§°ï¼š 1234567891011121314151617[Unit]Description=Cloudflare TunnelAfter=network.target[Service]Type=simpleUser=rootExecStart=/usr/local/bin/cloudflared tunnel run &lt;tunnel-name&gt;Restart=alwaysRestartSec=5# å¯é€‰ï¼šè®¾ç½®ç¯å¢ƒå˜é‡Environment=TUNNEL_ORIGIN_CERT=/path/to/cert.pem# å¯é€‰ï¼šæŒ‡å®šé…ç½®æ–‡ä»¶Environment=CLOUDFLARED_CONFIG=/path/to/config.yml[Install]WantedBy=multi-user.target å¯ç”¨å¹¶å¯åŠ¨æœåŠ¡ä¾æ¬¡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š 12345678# é‡æ–°åŠ è½½ systemdsudo systemctl daemon-reload# å¯ç”¨å¼€æœºè‡ªå¯sudo systemctl enable cloudflared-tunnel.service# å¯åŠ¨æœåŠ¡sudo systemctl start cloudflared-tunnel.service ä¹‹åï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥æœåŠ¡çŠ¶æ€å’Œæ—¥å¿—ï¼š 12345# æ£€æŸ¥çŠ¶æ€sudo systemctl status cloudflared-tunnel.service# æŸ¥çœ‹æ—¥å¿—sudo journalctl -u cloudflared-tunnel.service -f å¯ç”¨ â€œAlways Use HTTPSâ€ è®¾ç½® Cloudflare æä¾›äº†ä¸€ä¸ªéå¸¸ç®€å•çš„æ–¹æ³•æ¥è‡ªåŠ¨å°†æ‰€æœ‰ HTTP æµé‡é‡å®šå‘åˆ° HTTPSï¼šé€šè¿‡ â€œAlways Use HTTPSâ€ é€‰é¡¹ã€‚è¿™æ˜¯æœ€ç›´æ¥çš„æ–¹å¼ï¼Œé€‚ç”¨äºå¤§å¤šæ•°åœºæ™¯ã€‚ æ“ä½œæ­¥éª¤ï¼š ç™»å½•åˆ°ä½ çš„ Cloudflare æ§åˆ¶é¢æ¿ã€‚ é€‰æ‹©ä½ è¦é…ç½®çš„åŸŸåã€‚ è¿›å…¥ â€œSSL/TLSâ€ è®¾ç½®é¡µé¢ã€‚ åœ¨é¡µé¢é¡¶éƒ¨ï¼Œç‚¹å‡» â€œEdge Certificatesâ€ é€‰é¡¹å¡ã€‚ å‘ä¸‹æ»šåŠ¨ï¼Œæ‰¾åˆ° â€œAlways Use HTTPSâ€ è®¾ç½®ã€‚ å¼€å¯è¿™ä¸ªé€‰é¡¹ï¼Œå°†æ‰€æœ‰çš„ HTTP è¯·æ±‚è‡ªåŠ¨é‡å®šå‘åˆ° HTTPSã€‚ ä¼˜ç‚¹ï¼š å®‰å…¨æ€§é«˜ï¼šå†…ç½‘ä¸éœ€è¦æš´éœ²åœ¨å…¬ç½‘ï¼Œåªé€šè¿‡åŠ å¯†éš§é“è¿›è¡Œé€šä¿¡ã€‚ æ— å…¬ç½‘ IPï¼šé€‚ç”¨äºæ²¡æœ‰å›ºå®šå…¬ç½‘ IP çš„ç¯å¢ƒã€‚ ç®€åŒ–é…ç½®ï¼šä¸éœ€è¦å¤æ‚çš„ç«¯å£æ˜ å°„æˆ– NAT é…ç½®ã€‚ æ³¨æ„ï¼š Cloudflare Tunnel æ˜¯ä¸€ç§åŸºäº Cloudflare çš„æœåŠ¡ï¼Œå› æ­¤éœ€è¦æœ‰ä¸€ä¸ª Cloudflare è´¦æˆ·ï¼Œå¹¶ä¸” DNS éœ€è¦æŒ‡å‘ Cloudflare æ‰èƒ½ä½¿ç”¨ã€‚ å¯èƒ½ä¼šæœ‰æµé‡é™åˆ¶æˆ–è´¹ç”¨é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯åœ¨é«˜æµé‡åœºæ™¯ä¸‹ã€‚ è¿™ç§æ–¹å¼çš„å¥½å¤„æ˜¯å¯ä»¥è½»æ¾å®ç°å†…ç½‘ç©¿é€ï¼Œå¹¶ä¸”åˆ©ç”¨ Cloudflare çš„å…¨çƒåŠ é€Ÿå’Œå®‰å…¨é˜²æŠ¤åŠŸèƒ½ï¼Œä½¿ä½ çš„åº”ç”¨æ›´åŠ å¯é å’Œå®‰å…¨ã€‚å¦‚æœæœ‰å…¶ä»–é—®é¢˜ï¼Œæˆ–å¯¹æŸäº›é…ç½®æœ‰ç–‘é—®ï¼Œæ¬¢è¿ç»§ç»­æé—®ï¼","link":"/2025/02/02/cloudflare/"},{"title":"è®¡ç®—è¾å°„ç‰©ç†","text":"ComputationalRadiationPhysicsOpticspy Optics diffraction calculation. https://github.com/opticspy/lightpipes.git Clara2Clara2 - a parallel classical radiation calculator based on LiÃ©nard-Wiechert potentials. https://github.com/ComputationalRadiationPhysics/clara2 PIConGPUPerformance-Portable Particle-in-Cell Simulations for the Exascale Era. https://github.com/ComputationalRadiationPhysics/picongpu.git Meepfree finite-difference time-domain (FDTD) software for electromagnetic simulations https://github.com/NanoComp/meep.git and MIT Photonic-Bands: computation of photonic band structures in periodic media https://github.com/NanoComp/mpb.git GVFGradient Vector Flow in Python based on the work of Chenyang Xu and Jerry Prince. Gradient Vector Flow in 3D based on the work of Erik Smistad. https://github.com/Christophe-Foyer/GVF-Python.git","link":"/2023/08/10/computation/"},{"title":"æœºå™¨å­¦ä¹ èµ„æº","text":"æ•°æ®åˆ†æå…¥é—¨https://github.com/apachecn/pyda-2e-zh.git Twitterç®—æ³•https://github.com/twitter/the-algorithm.git Data Scienceç¬”è®°https://github.com/fengdu78/Data-Science-Notes Machine Learningç¬”è®°å´æ©è¾¾Machine learningç¬”è®°ã€‚ https://github.com/fengdu78/Coursera-ML-AndrewNg-Notes.git 100-Day-Machine-Learning100-Days-Of-ML-Codeä¸­æ–‡ç‰ˆ https://github.com/MLEveryday/100-Days-Of-ML-Code.git Deep Learning BookDeep Learning Book Chinese onlineï¼š https://exacity.github.io/deeplearningbook-chinese/Chapter1_introduction/ Source Codeï¼š https://github.com/exacity/deeplearningbook-chinese.git Huawei æ‹æœˆäº®https://github.com/zhazhajust/Learning-to-See-in-the-Dark.git GPT2.0åŸºäºå¼€æºGPT2.0çš„åˆä»£åˆ›ä½œå‹äººå·¥æ™ºèƒ½ | å¯æ‰©å±•ã€å¯è¿›åŒ– https://github.com/EssayKillerBrain/WriteGPT.git Full StackğŸš€ fullstack tutorial 2022ï¼Œåå°æŠ€æœ¯æ ˆ/æ¶æ„å¸ˆä¹‹è·¯/å…¨æ ˆå¼€å‘ç¤¾åŒºï¼Œæ˜¥æ‹›/ç§‹æ‹›/æ ¡æ‹›/é¢è¯•ã€‚ https://github.com/frank-lam/fullstack-tutorial.git Java21å¤©å­¦ä¼šJAVA https://github.com/DuGuQiuBai/Java.git","link":"/2023/08/10/datascience/"},{"title":"å·ç§¯ç®—æ³•å®ç°AutoCorrå’Œé«˜æ–¯æ»¤æ³¢ï¼ˆé«˜æ–¯æ¨¡ç³Šï¼‰","text":"è‡ªç›¸å…³123456from scipy import signalrng = np.random.default_rng()sig = rng.standard_normal(1000)autocorr = signal.fftconvolve(sig, sig[::-1], mode='full') é«˜æ–¯æ»¤æ³¢12345678910import scipyfrom scipy.ndimage import gaussian_filterimport scipy.signal as signalc = 3e8dx = 1e-6 * (x[1] - x[0])sigma = c/10e12/dxEyTHz = scipy.ndimage.gaussian_filter(EyEnd, sigma = 15) ä½¿ç”¨é«˜æ–¯æ ¸å·ç§¯è¿›è¡Œæ»¤æ³¢ 12345678im = EyEndgauss_kernel = np.outer(signal.gaussian(im.shape[0], 15), signal.gaussian(im.shape[1], 15))#gauss_kernel = gauss_kernel/np.sum(gauss_kernel)gauss_kernel /= np.trapz(np.trapz(gauss_kernel))im_real = signal.convolve(im, gauss_kernel, mode='same')#im_real = im * gauss_kernel å…¶ä¸­sigmaä¸ºæ»¤æ³¢å®½åº¦ ä½¿ç”¨å·ç§¯å®ç°æ»¤æ³¢12345678910111213import numpy as npfrom scipy import signal#from scipy import miscimport matplotlib.pyplot as plt####åŠ¨æ€æ¨¡ç³Šæ ¸å¿ƒguass_kernal = [[0, 0, 1], [0, 1, 0], [1, 0, 0]]result = signal.convolve2d(origin, guass_kernal, boundary='symm', mode='same') äºŒç»´çš„å·ç§¯è¿ç®—è¿˜æœ‰ä¸€ç§å‡½æ•°ï¼Œæ˜¯signal.sepfir2d()ï¼Œå®ƒå¯ä»¥ä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼Œåä¸¤ä¸ªå‚æ•°æŒ‡å®šè¡Œå’Œåˆ—çš„å·ç§¯å’Œ(ä¸¤ä¸ªæ–¹å‘ä¸Šçš„å·ç§¯æ˜¯å¯ä»¥ä¸åŒçš„ï¼Œåˆ†åˆ«æŒ‡å®šå·ç§¯å’Œåºåˆ—)ã€‚ é¢‘åŸŸå·ç§¯12345678910111213141516171819202122232425262728293031323334from scipy import signalimport numpy as npimport numpy.fft as fpim = EyEnd #EyEndä¸ºéœ€è¦æ»¤æ³¢çš„å›¾åƒgauss_kernel = np.outer(signal.gaussian(im.shape[0], 15), signal.gaussian(im.shape[1], 15))plt.pcolormesh(gauss_kernel, cmap = 'jet')freq = np.fft.fft2(im)assert(freq.shape == gauss_kernel.shape)freq_kernel = np.fft.fft2(np.fft.ifftshift(gauss_kernel))fig = plt.figure(figsize = (10, 4))ax_1 = fig.add_subplot(121, projection='3d')ax_2 = fig.add_subplot(122, projection='3d') Y = np.arange(0 - int(im.shape[0]/2), im.shape[0] - int(im.shape[0]/2), 1)X = np.arange(0 - int(im.shape[1]/2), im.shape[1] - int(im.shape[1]/2), 1)X, Y = np.meshgrid(X, Y) ax_1.plot_surface(X, Y, np.log10(np.abs(fp.ifftshift(freq))), rstride=4,cstride=4, cmap=plt.cm.coolwarm) ax_2.plot_surface(X, Y, np.abs(fp.ifftshift(freq_kernel)), rstride=4,cstride=4, cmap=plt.cm.coolwarm)plt.show()conv = freq*freq_kernelim1 = fp.ifft2(conv).real ç®€æ´ç‰ˆ 12345678910111213141516171819202122232425262728from scipy import signalimport numpy as npimport numpy.fft as fpdef fftConv(im, sigma): gauss_kernel = np.outer(signal.gaussian(im.shape[0], sigma), signal.gaussian(im.shape[1], sigma)) plotFreq(freqX, freqY, gauss_kernel.T) freq = np.fft.fft2(im) assert(freq.shape == gauss_kernel.shape) freq_kernel = np.fft.fft2(np.fft.ifftshift(gauss_kernel)) #freq_kernel = np.fft.fft2(gauss_kernel) plotField(freqX, freqY, np.log10(np.abs(fp.ifftshift(freq))).T) plotFreq(freqX, freqY, np.abs(fp.ifftshift(freq_kernel)).T) conv = freq*freq_kernel im1 = fp.ifft2(conv).real return im1im = EyEndplotField(x, y, im.T)sigma = 15im1 = fftConv(im, sigma)plotField(freqX, freqY, im1.T) æ—¶åŸŸå’Œé¢‘åŸŸå¯¹æ¯” 123456789101112131415161718192021222324252627import matplotlib.pyplot as pylabfreq = np.fft.fft2(im)assert(freq.shape == gauss_kernel.shape)freq_kernel = np.fft.fft2(np.fft.ifftshift(gauss_kernel))conv = freq * freq_kernelim1 = fp.ifft2(conv).realpylab.figure(figsize = (20, 8))pylab.gray()pylab.subplot(2, 3, 1), pylab.pcolormesh(im.T, cmap = 'bwr'), pylab.title('Original Image', size = 30), pylab.axis('off')pylab.subplot(2, 3, 2), pylab.pcolormesh(gauss_kernel.T, cmap = 'jet'), pylab.title('Gaussian Kernel', size = 30), pylab.axis('off')pylab.subplot(2, 3, 3), pylab.pcolormesh(im1.T, cmap = 'bwr'), pylab.title('Output Image', size = 30), pylab.axis('off')imOrigin = (20*np.log10(np.abs(0.1+fp.ifftshift(freq)))).astype(int)pylab.subplot(2, 3, 4), pylab.pcolormesh(imOrigin.T, cmap = 'bwr')pylab.title('Origin Image Spectrum', size = 30), pylab.axis('off')imGuassian = (20*np.log10(np.abs(0.1+fp.ifftshift(freq_kernel)))).astype(int)pylab.subplot(2, 3, 5), pylab.pcolormesh(imGuassian.T, cmap = 'jet')pylab.title('Gaussian Kernel Spectrum', size = 30), pylab.axis('off')imOutSpec = (20*np.log10(np.abs(0.1+fp.ifftshift(conv)))).astype(int)pylab.subplot(2, 3, 6), pylab.pcolormesh(imOutSpec.T, cmap = 'jet')pylab.title('Output Image Spectrum', size = 30), pylab.axis('off') å¸¦é€šæ»¤æ³¢åœ¨è¿™é‡Œå°è¯•ä½¿ç”¨é«˜æ–¯å·®åˆ†æ ¸ï¼ˆä¸¤ä¸ªé«˜æ–¯æ ¸çš„å·®ï¼‰ï¼Œä½œä¸ºå¸¦é€šæ»¤æ³¢å™¨ã€‚å¸¦é€šæ»¤æ³¢æ˜¯ä¿ç•™ä¸€å®šé¢‘æ®µå†…çš„é¢‘ç‡åˆ†é‡ï¼Œè€Œä¸¢å¼ƒå…¶ä½™æ‰€æœ‰çš„é¢‘ç‡åˆ†é‡ã€‚ 12345678910111213141516171819###è¯»å–å›¾åƒim = img_as_float(pylab.imread('./images/snow.jpg'))pylab.figure(), pylab.imshow(im), pylab.axis('off'), pylab.show()x = np.linspace(-10, 10, 15)###kernel 1 ç”Ÿæˆkernel = np.exp(-0.005*x**2)kernel /= np.trapz(kernel)guass_kernel_1 = kernel[:, np.newaxis] * kernel[np.newaxis, :]###kernel 2 ç”Ÿæˆkernel = np.exp(-5*x**2)kernel /= np.trapz(kernel)guass_kernel_2 = kernel[:, np.newaxis] * kernel[np.newaxis, :]###è¿›è¡Œå·®åˆ†DOGkernel = guass_kernel_1[:,:,np.newaxis] - guass_kernel_2[:,:,np.newaxis]###å·ç§¯im = signal.fftconvolve(im, DOGkernel, mode = 'same')pylab.figure, pylab.imshow(np.clip(im, 0, 1)), pylab.axis('off'), print(np.max(im))pylab.show()","link":"/2022/07/03/conv/"},{"title":"å¤ªèµ«å…¹é¬¼æˆåƒ","text":"1 ç®€ä»‹1.1 é‡å­é¬¼æˆåƒ1.2 ç»å…¸é¬¼æˆåƒ1.3 è®¡ç®—æˆåƒ2 åŸç†2.12.23 é¬¼æˆåƒæ–¹æ¡ˆ3.1 SIç¼–ç 3.2 VO2ç¼–ç 3.3 æ³µæµ¦å…‰ç¼–ç 4 å‘å±•æ–¹å‘","link":"/2022/08/11/ghostimg/"},{"title":"Linux cgroup å®ç° SSH ç”¨æˆ·èµ„æºé™åˆ¶æŒ‡å—","text":"æœ¬æ–‡è¯¦ç»†ä»‹ç»å¦‚ä½•ä½¿ç”¨ cgroup å¯¹ SSH ç™»å½•ç”¨æˆ·è¿›è¡Œèµ„æºé™åˆ¶ï¼ŒåŒ…æ‹¬ CPUã€å†…å­˜å’Œ GPU èµ„æºçš„é…é¢ç®¡ç†ã€‚ ä¸€ã€cgroup é™åˆ¶åŸç†1. èµ„æºæ§åˆ¶å±‚æ¬¡1234567graph TD A[ç³»ç»Ÿèµ„æº] --&gt; B[cgroup å±‚çº§] B --&gt; C[ç”¨æˆ·ä¼šè¯] B --&gt; D[ç”¨æˆ·è¿›ç¨‹] C --&gt; E[CPU é™åˆ¶] C --&gt; F[å†…å­˜é™åˆ¶] C --&gt; G[GPU é™åˆ¶] 2. å…³é”®ç»„ä»¶ ç»„ä»¶ åŠŸèƒ½ é…ç½®æ–‡ä»¶ cgconfig cgroup å®šä¹‰ /etc/cgconfig.conf cgred è§„åˆ™å¼•æ“ /etc/cgrules.conf pam_cgroup PAM é›†æˆ /etc/pam.d/sshd äºŒã€åŸºç¡€ç¯å¢ƒé…ç½®1. å®‰è£…å¿…è¦å·¥å…·12345# CentOS/RHELsudo dnf install libcgroup libcgroup-tools# Ubuntu/Debiansudo apt install cgroup-tools cgroupfs-mount 2. å¯ç”¨ cgroup æœåŠ¡12sudo systemctl enable cgconfigsudo systemctl enable cgred ä¸‰ã€SSH ç”¨æˆ·èµ„æºé™åˆ¶é…ç½®1. åˆ›å»º cgroup æ¨¡æ¿ç¼–è¾‘ /etc/cgconfig.confï¼š 12345678910111213141516171819202122# CPU é™åˆ¶ï¼ˆç›¸å¯¹æƒé‡ï¼‰group ssh_limit/cpu { cpu { cpu.shares = 512; # é»˜è®¤1024ï¼Œå€¼è¶Šå°æƒé‡è¶Šä½ }}# å†…å­˜é™åˆ¶ï¼ˆç¡¬é™åˆ¶ï¼‰group ssh_limit/memory { memory { memory.limit_in_bytes = 8G; memory.memsw.limit_in_bytes = 16G; # åŒ…å«äº¤æ¢ç©ºé—´ }}# CPU æ ¸ç»‘å®šgroup ssh_limit/cpuset { cpuset { cpuset.cpus = &quot;0-3&quot;; # åªå…è®¸ä½¿ç”¨0-3å·CPUæ ¸å¿ƒ cpuset.mems = &quot;0&quot;; # NUMAèŠ‚ç‚¹ }} 2. é…ç½®ç”¨æˆ·æ˜ å°„è§„åˆ™ç¼–è¾‘ /etc/cgrules.confï¼š 1234# æ ¼å¼ï¼šç”¨æˆ·:è¿›ç¨‹ æ§åˆ¶å™¨ç»„ è·¯å¾„*:user1 cpu,memory,cpuset ssh_limit/*:user2 cpu,memory,cpuset ssh_limit/*:@devteam cpu,memory,cpuset ssh_limit/ # ç”¨æˆ·ç»„ 3. é›†æˆ SSH è®¤è¯ç¼–è¾‘ /etc/pam.d/sshdï¼š 12# åœ¨ session éƒ¨åˆ†æ·»åŠ session required pam_cgroup.so 4. é‡å¯æœåŠ¡1sudo systemctl restart cgconfig cgred sshd å››ã€GPU èµ„æºé™åˆ¶ï¼ˆNVIDIAï¼‰1. å®‰è£… GPU cgroup å·¥å…·12345# NVIDIA ä¸“ç”¨å·¥å…·sudo dnf install nvidia-cgroup-tools# æˆ–æ‰‹åŠ¨é…ç½®sudo mkdir /sys/fs/cgroup/devices/gpu_limited 2. é…ç½® GPU è®¾å¤‡è§„åˆ™123456# ç¦æ­¢æ‰€æœ‰GPUè®¾å¤‡echo 'c 195:* rwm' | sudo tee /sys/fs/cgroup/devices/gpu_limited/devices.deny# æŒ‰éœ€å…è®¸ç‰¹å®šè®¾å¤‡echo 'c 195:0 rwm' | sudo tee /sys/fs/cgroup/devices/gpu_limited/devices.allow # /dev/nvidia0echo 'c 195:1 rwm' | sudo tee /sys/fs/cgroup/devices/gpu_limited/devices.allow # /dev/nvidia1 3. ç”¨æˆ· GPU é…é¢åœ¨ /etc/cgrules.conf æ·»åŠ ï¼š 1*:gpu_user devices gpu_limited/ äº”ã€èµ„æºä½¿ç”¨ç›‘æ§1. å®æ—¶æŸ¥çœ‹ cgroup çŠ¶æ€12345678# CPU ä½¿ç”¨cgget -g cpu:ssh_limit/cpu# å†…å­˜ä½¿ç”¨cgget -g memory:ssh_limit/memory# GPU è®¾å¤‡è®¿é—®cgget -g devices:gpu_limited 2. ç”Ÿæˆèµ„æºæŠ¥å‘Š12# æ¯å°æ—¶è®°å½•èµ„æºä½¿ç”¨*/60 * * * * root cgget -g cpu,memory:ssh_limit/ &gt; /var/log/cgroup-usage.log å…­ã€é«˜çº§é…ç½®æŠ€å·§1. åŠ¨æ€è°ƒæ•´é™åˆ¶1234# ä¸´æ—¶å¢åŠ å†…å­˜é…é¢ï¼ˆ8G â†’ 12Gï¼‰cgset -r memory.limit_in_bytes=12G ssh_limit/memory# æ°¸ä¹…ä¿®æ”¹éœ€æ›´æ–° /etc/cgconfig.conf 2. ç”¨æˆ·ç»„é…é¢ç»§æ‰¿12345678910111213# çˆ¶ç»„å®šä¹‰group parent_group { cpu { cpu.shares = 1024; }}# å­ç»„ç»§æ‰¿group parent_group/child_group { cpu { cpu.shares = 512; }} ä¸ƒã€å¸¸è§é—®é¢˜æ’æŸ¥1. SSH ç™»å½•åæ— é™åˆ¶æ£€æŸ¥ç‚¹ï¼š pam_cgroup æ˜¯å¦åœ¨ /etc/pam.d/sshd ä¸­å¯ç”¨ ç”¨æˆ·æ˜¯å¦åœ¨ /etc/cgrules.conf ä¸­å®šä¹‰ cgred æœåŠ¡çŠ¶æ€ï¼šsystemctl status cgred 2. GPU è®¾å¤‡è®¿é—®è¢«æ‹’è§£å†³æ­¥éª¤ï¼š 12345# æŸ¥çœ‹è®¾å¤‡æƒé™cgget -g devices:gpu_limited# æ·»åŠ ç¼ºå¤±è®¾å¤‡echo 'c 195:2 rwm' | sudo tee /sys/fs/cgroup/devices/gpu_limited/devices.allow 3. å†…å­˜è¶…é™å¤„ç†é…ç½® OOM é€šçŸ¥ï¼š 123456# /etc/cgconfig.confgroup ssh_limit/memory { memory { memory.oom_control = 1; # å¯ç”¨OOMé€šçŸ¥ }} ç›‘æ§ OOM äº‹ä»¶ï¼š 1sudo tail -f /var/log/messages | grep -i oom æœ¬æ–‡æ¡£æ›´æ–°æ—¥æœŸï¼š2025-12-21é€‚ç”¨ç³»ç»Ÿï¼šCentOS/RHEL 8+, Ubuntu 20.04+","link":"/2025/12/21/linux-cgroup-ssh-limit/"},{"title":"matplotlib colorbarä½ç½®","text":"matplotlib 3.5ä»¥ä¸Šç‰ˆæœ¬ 12345678fig, ax = plt.subplots(figsize = [3, 1.5])norm = mpl.colors.Normalize(0, 20, clip=True)im = plt.pcolormesh([[0,0,0],[0,0,20],[0,6,0]], cmap = 'jet', norm = norm)cbar2 = fig.colorbar(im, cmap = 'jet', location='top', shrink = 0.8)cbar2.set_label('E_k [MeV]') å¦‚æœfigure.colorbaræ²¡æœ‰locationå‚æ•°ï¼Œåˆ™ä½¿ç”¨mpl.colorbar.make_axesæˆ–è€…mpl.colorbar.make_axes_gridspecæ„é€ caxç„¶åç”Ÿæˆè°ƒç”¨Colorbaræ„é€ å‡½æ•°ç”Ÿæˆcbar 12345678910111213141516171819#plt.colorbar().set_label.__doc__#kw = {&quot;location&quot;: &quot;top&quot;, &quot;orientation&quot;: &quot;horizontal&quot;,# &quot;anchor&quot;: (0.5, 0.0), &quot;panchor&quot;: (0.5, 1.0), &quot;pad&quot;: 0.05}#kw['orientation'] = kw['orientation']#location = kw['ticklocation'] = kw['location']kw = {'shrink': 0.8, 'orientation': &quot;horizontal&quot;, 'location': 'top'}#cax, kw = mpl.colorbar.make_axes_gridspec(ax, **kw)cax, kw = mpl.colorbar.make_axes(ax, **kw)NON_COLORBAR_KEYS = ['fraction', 'pad', 'shrink', 'aspect', 'anchor', 'panchor']cb_kw = {k: v for k, v in kw.items() if k not in NON_COLORBAR_KEYS}cbar = mpl.colorbar.Colorbar(cax, im, ticklocation = &quot;top&quot;, orientation = &quot;horizontal&quot;)cbar.set_label('E_k [MeV]') æ­¤å¤–ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰caxç„¶åç”Ÿæˆcbar 12345678cax = fig.add_axes([0.15, 1.05, 0.7, 0.05], label=&quot;&lt;colorbar&gt;&quot;)cbar = mpl.colorbar.Colorbar(cax, im, orientation = &quot;horizontal&quot;, ticklocation = &quot;top&quot;)cbar.set_ticks([0, 10, 20])cbar.ax.xaxis.set_ticks_position('top')cbar.ax.xaxis.set_label_position('top')cbar.set_label('E_k [MeV]')","link":"/2022/07/04/matplotlib/"},{"title":"å·ç§¯ç®—æ³•å®ç°AutoCorrå’Œé«˜æ–¯æ»¤æ³¢ï¼ˆé«˜æ–¯æ¨¡ç³Šï¼‰","text":"è‡ªå®šä¹‰FFTå·ç§¯ä½¿ç”¨fftshift(fft(fftshift(signal))): 1.ä¸æ”¹å˜é¢‘è°±çš„å¹…åº¦å’Œç›¸ä½ 2.ä½¿å¾—é¢‘è°±çš„èŒƒå›´ä¸º-Fs/2åˆ°Fs/2ï¼Œä¸­å¿ƒé¢‘ç‡ä¸º0 1234567891011121314def fftconvolve(im, gauss_kernel): gauss_f = np.fft.fftshift(np.fft.fft2(np.fft.fftshift(gauss_kernel))) #plotFreq(x, y, np.log(np.abs(gauss_f)).T) #plotFreq(x, y, np.log(np.angle(gauss_f)).T) im_r = np.fft.fftshift(np.fft.fft2(np.fft.fftshift(im))) #plotField(x, y, np.log(np.abs(im_r)).T) #plotFreq(x, y, np.log(np.angle(im_r)).T) im_filter = np.fft.ifftshift(np.fft.ifft2(np.fft.ifftshift(gauss_f * im_r))).real #plotField(x, y, im_filter.T) return im_filterim_filter = fftconvolve(im, gauss_kernel) åªæ”¹å˜gauss_kernalçš„fftä¹Ÿå¯ä»¥å¾—åˆ°ç›¸åŒçš„ç»“æœ 1234567891011121314def fftconvolve(im, gauss_kernel): gauss_f = np.fft.fftshift(np.fft.fft2(np.fft.fftshift(gauss_kernel))) #plotFreq(x, y, np.log(np.abs(gauss_f)).T) #plotFreq(x, y, np.log(np.angle(gauss_f)).T) im_r = np.fft.fftshift(np.fft.fft2(np.fft.fftshift(im))) #plotField(x, y, np.log(np.abs(im_r)).T) #plotFreq(x, y, np.log(np.angle(im_r)).T) im_filter = np.fft.ifftshift(np.fft.ifft2(np.fft.ifftshift(gauss_f * im_r))).real #plotField(x, y, im_filter.T) return im_filterim_filter = fftconvolve(im, gauss_kernel) ä½¿ç”¨fftshiftå’Œä¸é€‚ç”¨fftshiftçš„ç›¸ä½è§’å¯¹æ¯”ã€‚","link":"/2022/07/03/myfftconvolve/"},{"title":"é«˜æ–¯å·®åˆ†å’Œè¶…é«˜æ–¯æ»¤æ³¢","text":"123456789101112131415161718def gauss_func(Nx, sigma, n): x = np.arange(Nx) * dx cen = x0 print(cen) amp = 1 return amp * np.exp(-(x - cen) ** n / (2 * sigma ** n))def gauss_func2d(Nx, Ny, sigma, n): x = np.arange(Nx) y = np.arange(Ny) Y, X = np.meshgrid(y, x) cen = [x0, y0] print(cen) amp = 1 R = np.sqrt((X * dx - cen[0])**2 + (Y * dy - cen[1])**2) return amp * np.exp(- R ** n / (2 * sigma ** n))","link":"/2022/07/05/gauss_diff/"},{"title":"å¤ªèµ«å…¹é¬¼æˆåƒ","text":"åå¾®åˆ†æ–¹ç¨‹æ±‚è§£å¯¹äºæ³¢åŠ¨æ–¹ç¨‹ç­‰åå¾®åˆ†æ–¹ç¨‹ï¼Œéš¾ä»¥ç›´æ¥æ±‚è§£æè§£ï¼Œä¸€èˆ¬é‡‡ç”¨æ•°å€¼æ–¹æ³•æ±‚è§£ã€‚ç›®å‰ç”µç£å­¦ä¸»è¦é€šè¿‡æœ‰é™å…ƒæ³•ï¼ˆFEMï¼‰ï¼ˆé€šè¿‡Galerkinæ³•åŸºå‡½æ•°åˆ†è§£ï¼‰ã€æœ‰é™æ—¶åŸŸå·®åˆ†æ³•ï¼ˆFDTDï¼‰ã€çŸ©é‡æ³•ï¼ˆMoMï¼‰ç­‰è¿›è¡Œæ•°å€¼æ¨¡æ‹Ÿã€‚å¯¹äºæ›´ä¸€èˆ¬çš„åå¾®åˆ†æ–¹ç¨‹æ±‚è§£æ–¹æ³•ï¼Œè¿™é‡Œä»‹ç»Method of Linesæ–¹æ³•æ±‚è§£ã€‚ Method of LinesMethod of Linesæ˜¯æ±‚è§£åå¾®åˆ†æ–¹ç¨‹çš„ä¸€ç§é€šç”¨è®¡ç®—æ–¹æ³•ã€‚Method of Linesæ–¹æ³•é€šè¿‡ç©ºé—´ç¦»æ•£ï¼Œå°†åå¾®åˆ†æ–¹ç¨‹è½¬åŒ–ä¸ºå¸¸å¾®åˆ†æ–¹ç¨‹ç»„ODEsï¼Œåç»­é€šè¿‡Eularæ³•ï¼Œéšå¼æ¬§æ‹‰æ³•ï¼ˆç‰›é¡¿è¿­ä»£ã€ä¸åŠ¨ç‚¹æ³•ï¼‰ç­‰æ±‚è§£ã€‚ åŸºæœ¬æ¡ˆä¾‹ä¾‹ï¼šæ±‚è§£æ‰©æ•£æ–¹ç¨‹ $$\\frac{\\partial u}{\\partial t} = D\\frac{\\partial^2 u}{\\partial x^2}$$ å°†$D\\frac{\\partial^2}{\\partial x^2}$ç¦»æ•£åŒ–ä¸ºçŸ©é˜µ$A$ï¼Œå°†$\\frac{d}{dt}U$å†™ä¸º$\\dot U$ï¼Œä½¿ç”¨çŸ©é˜µå½¢å¼è¡¨ç¤ºä¸º$\\dot U = AU$ã€‚ ä¾‹å¦‚$\\frac{du_i}{dt} = -v\\frac{du}{dx}$æ–¹ç¨‹è½¬åŒ–ä¸º$\\frac{du_i}{dt} = -v\\frac{(u_i - u_{i-1})}{\\delta x}, 1 \\leq i \\leq M$ï¼Œå†è½¬åŒ–ä¸ºçŸ©é˜µå½¢å¼ã€‚ forward eularè®²çŸ©é˜µä¹˜ç§¯å†™ä¸ºå‡½æ•°å½¢å¼$$\\dot U = F(U)$$åˆ™å¯ä½¿ç”¨å‰å‘æ¬§æ‹‰æ³•è¿›è¡Œæ±‚è§£$$U_{k+1} = U_k + \\delta tF(U_k)$$ RKæ–¹æ³•é¾™æ ¼åº“å¡”æ–¹æ³•æ˜¾å¼æ±‚è§£Method of Lineså¾—åˆ°çš„ODEsï¼Œå¯ä»¥å¾—åˆ°æ›´é«˜ç²¾åº¦çš„è§£ã€‚ ç§¯åˆ†ä¸­å€¼å®šç†å¯ä»¥å¾—å‡º$$U(t + \\delta t) = U(t) + \\delta tF(U(t + \\frac{1}{2}\\delta t)) + O(\\delta t^3)$$ é¾™æ ¼åº“å¡”æ³•é€šè¿‡é¢„æµ‹$U(t + \\frac{1}{2}\\delta t)$æ¥ä½¿ç”¨å‰å‘æ¬§æ‹‰æ³•$$\\widetilde U_{k+\\frac{1}{2}} = U_k + \\frac{\\delta t}{2}F(U_k)$$ $$U_{k+1} = U_k + \\delta tF(\\widetilde U_{k+\\frac{1}{2}})$$ è¿™æ˜¯ä¸€ç§ä¸¤é˜¶æ®µæ–¹æ³•ã€‚ç¬¬ä¸€é˜¶æ®µé¢„æµ‹ä¸­ç‚¹å€¼ï¼Œç¬¬äºŒé˜¶æ®µï¼Œå³æ ¡æ­£é˜¶æ®µï¼Œä½¿ç”¨é¢„æµ‹çš„ä¸­ç‚¹å€¼è¿›è¡Œæ—¶é—´æ­¥è¿›ã€‚","link":"/2022/08/17/numerical/"},{"title":"Marching Cubeç®—æ³•æå–ç½‘æ ¼","text":"PyMesh3DBasic InstallationThis project for mesh render in data science. 12pip install --upgrade pippip install pymesh3d If you need mayavi backend. 12pip install mayavipip install pyqt Quick Start123import pymeshimport numpy as npimport matplotlib.pyplot as plt Look at the directory example for full example. 123456789101112131415###################################################### Rotate Mesh Data ######################################################wkdir = &quot;../../Render&quot;ey = np.load(wkdir + &quot;/Ez.npy&quot;)[::2, ::50]m, n = ey.shape[0], ey.shape[1]res = np.zeros([m, n, n])pymesh.rotate(ey, res, ifhalf = False)fig = plt.figure(figsize=(4, 3))plt.contourf(res[:, int(n/2), :].T)cbar = plt.colorbar() 1234567####################################################### Save Mesh Data #######################################################mesh = pymesh.get_iso_surf(res, contours_number = 4, cmap = &quot;jet&quot;)color = pymesh.interp_color(mesh.iso_vals, cmap = &quot;jet&quot;)mesh.export(wkdir + &quot;test&quot;, &quot;obj&quot;) 12345####################################################### Load Mesh Data #######################################################mesh = pymesh.Mesh.load(wkdir + &quot;test&quot;, &quot;obj&quot;) 123####################################################### Plot Mesh Data ####################################################### 12345from mayavi import mlabmlab_mesh = pymesh.iso_surface(mesh, colormap = &quot;RdBu&quot;)mlab.colorbar()mlab.show() 12345################ plt example #################surf = mesh.plt_trisurf(cmap = &quot;jet&quot;)plt.colorbar(surf, orientation = 'horizontal')plt.tight_layout()","link":"/2022/08/15/pymesh/"},{"title":"å¹¿ä¹‰åŠ¨é‡å®ˆæ’æ¨å¯¼","text":"ä¸‹é¢ç»™å‡ºä¸€ä¸ªè¾ƒä¸ºè¯¦ç»†çš„æ¨å¯¼æ€è·¯ï¼Œè¯´æ˜ä¸ºä»€ä¹ˆä¼šå¾—åˆ°æ–¹ç¨‹$$\\frac{d}{dt}\\left(\\mathbf{p}_\\perp + q,\\mathbf{A}\\right) = 0 \\quad \\Longrightarrow \\quad \\mathbf{p}_\\perp = \\mathbf{p}_\\perp^0 - q,\\mathbf{A},$$ä»¥åŠ $\\mathbf{p}_\\perp^0 = m \\gamma^0 \\mathbf{v}_\\perp^0$ ç­‰ç»“æœã€‚è¿™é‡Œ $\\mathbf{p}_\\perp$ æŒ‡çš„æ˜¯ç²’å­çš„æ¨ªå‘(ä¸ä¸»ä¼ æ’­æ–¹å‘æ­£äº¤)åŠ¨é‡ï¼Œ$\\mathbf{A}$ æ˜¯ç”µç£åŠ¿(çŸ¢åŠ¿)ï¼Œ$q$ æ˜¯ç²’å­ç”µè·ï¼Œ$m$ æ˜¯ç²’å­è´¨é‡ï¼Œ$\\gamma$ æ˜¯ç›¸å¯¹è®ºå› å­ã€‚ä¸‹é¢åˆ†æ­¥éª¤è¯´æ˜ã€‚ 1. å¹¿ä¹‰åŠ¨é‡çš„å®šä¹‰ä¸è¿åŠ¨æ–¹ç¨‹åœ¨ç»å…¸ç”µåŠ¨åŠ›å­¦ä¸­ï¼Œå¸¦ç”µç²’å­åœ¨ç”µç£åœºä¸­è¿åŠ¨çš„æ‹‰æ ¼æœ—æ—¥é‡å¯ä»¥å†™ä½œ$$\\mathcal{L} ;=; -,m c^2,\\sqrt{1 - v^2/c^2} ;+; q,\\mathbf{A}\\cdot\\mathbf{v} ;-; q,\\phi,$$å…¶ä¸­ $\\mathbf{A}$ æ˜¯çŸ¢åŠ¿ã€$\\phi$ æ˜¯æ ‡åŠ¿ï¼Œ$\\mathbf{v}$ æ˜¯ç²’å­é€Ÿåº¦ï¼Œ$c$ æ˜¯å…‰é€Ÿã€‚ç›¸åº”çš„å¹¿ä¹‰åŠ¨é‡(canonical momentum)å®šä¹‰ä¸º$$\\mathbf{P} ;=; \\frac{\\partial \\mathcal{L}}{\\partial \\mathbf{v}};=; \\mathbf{p} + q,\\mathbf{A},$$å…¶ä¸­$$\\mathbf{p} ;=; \\gamma m,\\mathbf{v}\\quad (\\text{æƒ¯æ€§åŠ¨é‡æˆ–æœºæ¢°åŠ¨é‡}).$$å› æ­¤$$\\mathbf{p} ;=; \\mathbf{P} ;-; q,\\mathbf{A}.$$ ç”µç£åœºä¸­çš„ç‰›é¡¿æ–¹ç¨‹å¸¦ç”µç²’å­åœ¨ç”µç£åœºä¸­çš„ç›¸å¯¹è®ºè¿åŠ¨æ–¹ç¨‹(ç‰›é¡¿-æ´›ä¼¦å…¹æ–¹ç¨‹)å¯ä»¥å†™ä½œ$$\\frac{d\\mathbf{p}}{dt} ;=; q,\\bigl(\\mathbf{E} + \\mathbf{v}\\times\\mathbf{B}\\bigr).$$è‹¥ç”¨å¹¿ä¹‰åŠ¨é‡ $\\mathbf{P} = \\mathbf{p} + q\\mathbf{A}$ æ¥è¡¨è¿°ï¼Œåˆ™æœ‰$$\\frac{d\\mathbf{P}}{dt};=; q,\\mathbf{E} + q,\\frac{d\\mathbf{A}}{dt};=; q\\bigl(\\mathbf{E} + \\mathbf{v}\\times\\mathbf{B}\\bigr),$$å› ä¸º $\\mathbf{E} = -,\\nabla \\phi - \\partial_t \\mathbf{A}$ ä¸” $\\mathbf{v}\\times\\mathbf{B}$ ä¹Ÿå¯ä»¥ç”¨ $\\mathbf{A}$ è¡¨ç¤ºã€‚ç»è¿‡ä¸€ç³»åˆ—æ¨å¯¼åï¼Œè‹¥åœ¨æŸäº›æ–¹å‘(æ¯”å¦‚æ¨ªå‘æ–¹å‘ $\\perp$)ä¸Šï¼Œç³»ç»Ÿçš„å¯¹ç§°æ€§æˆ–å¹³ç§»ä¸å˜æ€§ä¿è¯äº†å¯¹è¯¥åˆ†é‡çš„å¹¿ä¹‰åŠ¨é‡å®ˆæ’ï¼Œé‚£ä¹ˆå°±ä¼šå¾—åˆ°$$\\frac{d}{dt}(\\mathbf{p}_\\perp + q,\\mathbf{A}_\\perp) ;=; 0.$$ 2. ä¸ºä½• $\\frac{d}{dt}(\\mathbf{p}_\\perp + q,\\mathbf{A}) = 0$ï¼Ÿåœ¨æ–‡ä¸­(æ–¹ç¨‹(10b))ï¼Œä½œè€…ç»™å‡ºçš„ç†ç”±æ˜¯ã€Œç”±äºåœ¨ $y$ å’Œ $z$ æ–¹å‘çš„å¹³ç§»ä¸å˜æ€§(translational invariance)ã€ï¼Œå¯¼è‡´æ¨ªå‘å¹¿ä¹‰åŠ¨é‡ä¸éšæ—¶é—´å˜åŒ–ï¼Œå³$$\\frac{d}{dt}\\bigl(\\mathbf{p}_\\perp + q,\\mathbf{A}\\bigr) = 0.$$æ¢è¨€ä¹‹ï¼Œåœ¨æ¨ªå‘æ–¹å‘(ç›¸å¯¹äºä¸»ä¼ æ’­æˆ–æµåŠ¨æ–¹å‘)æ²¡æœ‰ç©ºé—´ä¸Šçš„å˜åŒ–æˆ–å¤–åŠ›çš„é¢å¤–ä¾èµ–ï¼Œå› è€Œè¯¥åˆ†é‡çš„å¹¿ä¹‰åŠ¨é‡å®ˆæ’ã€‚ å¦‚æœä»¤ $\\mathbf{p}_\\perp^0$ è¡¨ç¤º $t &lt; 0$ æ—¶åˆ»(æˆ–â€œåˆå§‹â€)çš„æ¨ªå‘åŠ¨é‡ï¼Œä¸”å½“ $t&lt;0$ æ—¶çŸ¢åŠ¿ $\\mathbf{A} = 0$ï¼Œé‚£ä¹ˆå®ˆæ’é‡å°±æ˜¯$$\\mathbf{p}\\perp^0 + q,\\mathbf{A}\\big|{t&lt;0} ;=; \\mathbf{p}_\\perp^0.$$å› ä¸ºå®ˆæ’ï¼Œæ‰€ä»¥åœ¨ $t\\ge 0$ çš„ä»»ä½•æ—¶åˆ»éƒ½æ»¡è¶³$$\\mathbf{p}_\\perp(t) + q,\\mathbf{A}(t) ;=; \\mathbf{p}_\\perp^0.$$ä»è€Œå¾—åˆ°$$\\mathbf{p}_\\perp(t);=; \\mathbf{p}_\\perp^0 - q,\\mathbf{A}(t).$$è¿™æ­£æ˜¯æ–¹ç¨‹(11)çš„ä¸»è¦å½¢å¼ã€‚ 3. åˆå§‹æ¨ªå‘åŠ¨é‡ $\\mathbf{p}_\\perp^0$ çš„ç‰©ç†å«ä¹‰ $$\\mathbf{p}_\\perp^0 ;=; m,\\gamma^0 ,\\mathbf{v}_\\perp^0;=; -,\\hat{\\mathbf{y}},m,c,\\tan\\alpha,$$è¡¨æ˜æœ€åˆ(æ¯”å¦‚ç­‰ç¦»å­ä½“è¿˜æœªå—åˆ°åç»­åœºä½œç”¨æ—¶ï¼Œ$t&lt;0$)ï¼Œå¸¦ç”µç²’å­åœ¨æ¨ªå‘($\\perp$)æ–¹å‘æœ‰ä¸€ä¸ªåˆå§‹é€Ÿåº¦ $\\mathbf{v}_\\perp^0$ï¼Œå¯¹åº”çš„ç›¸å¯¹è®ºåŠ¨é‡å³$$\\mathbf{p}_\\perp^0 = \\gamma^0 m \\mathbf{v}_\\perp^0.$$è¿™é‡Œ $\\gamma^0 = 1/\\sqrt{1 - (v_\\perp^0)^2/c^2}$ è¡¨ç¤ºåˆå§‹é€Ÿåº¦å¯¹åº”çš„ç›¸å¯¹è®ºå› å­ã€‚æ–‡ä¸­ä¸¾ä¾‹ç»™å‡ºäº† $\\mathbf{p}_\\perp^0 = -,\\hat{\\mathbf{y}},m,c,\\tan\\alpha$ è¿™æ ·ä¸€ä¸ªå…·ä½“æ•°å€¼ï¼Œè¯´æ˜ç²’å­åˆå§‹æ—¶åœ¨è´Ÿ $y$ æ–¹å‘ä»¥ä¸€å®šé€Ÿåº¦($\\tan\\alpha$ ç›¸å…³)è¿åŠ¨ã€‚ 4. æ€»ç»“æ¨å¯¼è„‰ç»œ å¹¿ä¹‰åŠ¨é‡å®ˆæ’çš„å…³é”®ï¼šç”±äºåœ¨æ¨ªå‘æ–¹å‘ä¸Š(è¿™é‡ŒæŒ‡ $y,z$ æˆ–è€…ä½œè€…åªå…³æ³¨æŸä¸ªæ­£äº¤æ–¹å‘)ä¸å­˜åœ¨å¯¹ç²’å­çš„å‡€æ¨åŠ›ï¼Œæˆ–è€…è¯´ç³»ç»Ÿåœ¨è¯¥æ–¹å‘ä¸Šå…·å¤‡å¹³ç§»å¯¹ç§°æ€§ï¼Œå› æ­¤$\\mathbf{p}_\\perp + q,\\mathbf{A}$ å®ˆæ’ã€‚ åˆå§‹æ¡ä»¶ï¼š$t&lt;0$ æ—¶ï¼Œ$\\mathbf{A}=0$ï¼Œæ•…åˆå§‹æ—¶åˆ»çš„å¹¿ä¹‰åŠ¨é‡å°±æ˜¯ç²’å­çš„æœºæ¢°åŠ¨é‡ $\\mathbf{p}_\\perp^0$ã€‚ éšæ—¶é—´æ¨æ¼”ï¼šç”±äºå®ˆæ’é‡ä¸å˜ï¼Œå¯å†™å‡º$$\\mathbf{p}_\\perp(t) + q,\\mathbf{A}(t);=; \\mathbf{p}_\\perp^0\\quad\\Longrightarrow\\quad\\mathbf{p}_\\perp(t);=; \\mathbf{p}_\\perp^0 - q,\\mathbf{A}(t).$$ ç›¸å¯¹è®ºåŠ¨é‡è¡¨è¾¾ï¼š$\\mathbf{p}_\\perp^0 = m,\\gamma^0,\\mathbf{v}_\\perp^0$ï¼Œå¹¶ä¸”åœ¨å…·ä½“ç‰©ç†æƒ…æ™¯(ä¾‹å¦‚ç­‰ç¦»å­ä½“æµåŠ¨)ä¸­å¯ä»¥ç»™å‡ºé€Ÿåº¦æˆ–åŠ¨é‡çš„æ–¹å‘å’Œå¤§å°ï¼Œå¦‚æ–‡ä¸­çš„ $-\\hat{\\mathbf{y}},m,c,\\tan\\alpha$ã€‚ è¦ç‚¹åœ¨äºï¼š ç”µç£åœºä¸­ï¼Œæœºæ¢°åŠ¨é‡ $\\mathbf{p}$ å¹¶éä¸€å®šå®ˆæ’ï¼Œä½†å¹¿ä¹‰åŠ¨é‡ $\\mathbf{p} + q\\mathbf{A}$ å¯èƒ½ç”±äºå¯¹ç§°æ€§è€Œå®ˆæ’ã€‚ ä¸€æ—¦è®¤å®šåœ¨æŸä¸ªæ–¹å‘ä¸Šæ— å‡€åŠ›(æˆ–åœºç»“æ„å…·å¤‡å¹³ç§»ä¸å˜æ€§)ï¼Œå°±å¯æ–­è¨€é‚£ä¸€æ–¹å‘çš„å¹¿ä¹‰åŠ¨é‡å®ˆæ’ï¼Œä»è€Œå¾—åˆ° $\\mathbf{p}_\\perp = \\mathbf{p}_\\perp^0 - q\\mathbf{A}$ è¿™æ ·çš„å½¢å¼ã€‚ åˆå§‹æ¡ä»¶å†³å®šäº† $\\mathbf{p}_\\perp^0$ çš„å…·ä½“å€¼ï¼Œå†ç»“åˆå®ˆæ’æ–¹ç¨‹å°±èƒ½å¾—åˆ°éšæ—¶é—´æ¼”åŒ–çš„æ¨ªå‘åŠ¨é‡ã€‚","link":"/2025/02/27/rel_mom/"},{"title":"è¿œç¨‹è¿æ¥ä¸å”¤é†’","text":"ç®€ä»‹é¦–å…ˆå‡†å¤‡å¥½å…¬ç½‘ipv4 or ipv6ï¼Œä½¿ç”¨ddns-goç»‘å®šåŠ¨æ€ipåœ°å€åˆ°dnsæœåŠ¡å™¨ï¼ˆé™æ€ipä¸éœ€è¦ï¼‰ï¼Œæ­¤æ—¶å¯ã€‚éšåè¿è¡ŒWolGoWebæœåŠ¡ï¼Œå³å¯ä½¿ç”¨urlè¿›è¡Œè¿œç¨‹å”¤é†’ã€‚ dynv6ä½¿ç”¨ https://dynv6.com è¿›è¡ŒåŠ¨æ€åŸŸåè§£æï¼Œç»‘å®šipv6äºè‡ªå®šä¹‰åŸŸå https://xxx.dynv6.net ã€‚ ddns-goç®€å•å¥½ç”¨çš„DDNSã€‚è‡ªåŠ¨æ›´æ–°åŸŸåè§£æåˆ°å…¬ç½‘IP(æ”¯æŒé˜¿é‡Œäº‘ã€è…¾è®¯äº‘ã€Dnspodã€Cloudflareã€Callbackã€åä¸ºäº‘ã€ç™¾åº¦äº‘ã€Porkbunã€GoDaddyã€Google Domain) https://github.com/jeessy2/ddns-go.git æ­¤æ—¶ï¼Œipv6å·²è§£æäºddnsæœåŠ¡å™¨ï¼Œé€šè¿‡è‡ªå®šä¹‰urlå¯ä»¥é€šè¿‡è¿œç¨‹è¿æ¥è½¯ä»¶å¦‚rdpã€moonlightã€parsecç­‰ç›´æ¥è®¿é—®ã€‚ WolGoWebåŸºäºGolangçš„WebæœåŠ¡å™¨ï¼Œä½¿ç”¨urlé“¾æ¥å³å¯å‘èµ·wake on lanå±€åŸŸç½‘å”¤é†’ã€‚ https://github.com/zhazhajust/WolGoWeb.git ç„¶åæµ‹è¯•urlå”¤é†’ï¼Œåœ¨æµè§ˆå™¨è¾“å…¥ http://xxx:9090/wol?mac=00-00-00-00-00-00 ï¼ˆç½‘å¡MACåœ°å€ï¼‰ã€‚ Wake On Lan GUI ç¨‹åºï¼ˆOptionalï¼‰https://github.com/basildane/WakeOnLAN.git å‚è€ƒæ–‡çŒ®https://www.jianshu.com/p/6622c33f4cd3 https://zhouym.tech/2022/Wake-On-Lan/","link":"/2023/08/10/remote/"},{"title":"When to Use Static Generation v.s. Server-side Rendering","text":"We recommend using Static Generation (with and without data) whenever possible because your page can be built once and served by CDN, which makes it much faster than having a server render the page on every request. You can use Static Generation for many types of pages, including: Marketing pages Blog posts E-commerce product listings Help and documentation You should ask yourself: â€œCan I pre-render this page ahead of a userâ€™s request?â€ If the answer is yes, then you should choose Static Generation. On the other hand, Static Generation is not a good idea if you cannot pre-render a page ahead of a userâ€™s request. Maybe your page shows frequently updated data, and the page content changes on every request. In that case, you can use Server-Side Rendering. It will be slower, but the pre-rendered page will always be up-to-date. Or you can skip pre-rendering and use client-side JavaScript to populate data.","link":"/2020/01/02/ssg-ssr/"},{"title":"åŠ¨æ€å¼€ç‚¹çº¿æ®µæ ‘","text":"åŠ¨æ€çº¿æ®µæ ‘æ¨¡æ¿12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849/** * @Description: çº¿æ®µæ ‘ï¼ˆåŠ¨æ€å¼€ç‚¹ï¼‰ * @Author: LFool * @Date 2022/6/7 09:15 **/public class SegmentTreeDynamic { class Node { Node left, right; int val, add; } private int N = (int) 1e9; private Node root = new Node(); public void update(Node node, int start, int end, int l, int r, int val) { if (l &lt;= start &amp;&amp; end &lt;= r) { node.val += (end - start + 1) * val; node.add += val; return ; } int mid = (start + end) &gt;&gt; 1; pushDown(node, mid - start + 1, end - mid); if (l &lt;= mid) update(node.left, start, mid, l, r, val); if (r &gt; mid) update(node.right, mid + 1, end, l, r, val); pushUp(node); } public int query(Node node, int start, int end, int l, int r) { if (l &lt;= start &amp;&amp; end &lt;= r) return node.val; int mid = (start + end) &gt;&gt; 1, ans = 0; pushDown(node, mid - start + 1, end - mid); if (l &lt;= mid) ans += query(node.left, start, mid, l, r); if (r &gt; mid) ans += query(node.right, mid + 1, end, l, r); return ans; } private void pushUp(Node node) { node.val = node.left.val + node.right.val; } private void pushDown(Node node, int leftNum, int rightNum) { if (node.left == null) node.left = new Node(); if (node.right == null) node.right = new Node(); if (node.add == 0) return ; node.left.val += node.add * leftNum; node.right.val += node.add * rightNum; // å¯¹åŒºé—´è¿›è¡Œã€ŒåŠ å‡ã€çš„æ›´æ–°æ“ä½œï¼Œä¸‹æ¨æ‡’æƒ°æ ‡è®°æ—¶éœ€è¦ç´¯åŠ èµ·æ¥ï¼Œä¸èƒ½ç›´æ¥è¦†ç›– node.left.add += node.add; node.right.add += node.add; node.add = 0; }} å¯¹äºè¡¨ç¤ºä¸ºã€ŒåŒºé—´å’Œã€ä¸”å¯¹åŒºé—´è¿›è¡Œã€ŒåŠ å‡ã€çš„æ›´æ–°æ“ä½œçš„æƒ…å†µï¼Œæˆ‘ä»¬åœ¨æ›´æ–°èŠ‚ç‚¹å€¼çš„æ—¶å€™ã€éœ€è¦âœ–ï¸å·¦å³å­©å­åŒºé—´å¶å­èŠ‚ç‚¹çš„æ•°é‡ (æ³¨æ„æ˜¯å¶å­èŠ‚ç‚¹çš„æ•°é‡)ã€ï¼›æˆ‘ä»¬åœ¨ä¸‹æ¨æ‡’æƒ°æ ‡è®°çš„æ—¶å€™ã€éœ€è¦ç´¯åŠ ã€ï¼ï¼(è¿™ç§æƒ…å†µå’Œæ¨¡ç‰ˆä¸€è‡´ï¼ï¼) å¦‚é¢˜ç›® æœ€è¿‘çš„è¯·æ±‚æ¬¡æ•°å¯¹äºè¡¨ç¤ºä¸ºã€ŒåŒºé—´å’Œã€ä¸”å¯¹åŒºé—´è¿›è¡Œã€Œè¦†ç›–ã€çš„æ›´æ–°æ“ä½œçš„æƒ…å†µï¼Œæˆ‘ä»¬åœ¨æ›´æ–°èŠ‚ç‚¹å€¼çš„æ—¶å€™ã€éœ€è¦âœ–ï¸å·¦å³å­©å­åŒºé—´å¶å­èŠ‚ç‚¹çš„æ•°é‡ (æ³¨æ„æ˜¯å¶å­èŠ‚ç‚¹çš„æ•°é‡)ã€ï¼›æˆ‘ä»¬åœ¨ä¸‹æ¨æ‡’æƒ°æ ‡è®°çš„æ—¶å€™ã€ä¸éœ€è¦ç´¯åŠ ã€ï¼ï¼(å› ä¸ºæ˜¯è¦†ç›–æ“ä½œï¼ï¼) å¦‚é¢˜ç›® åŒºåŸŸå’Œæ£€ç´¢ - æ•°ç»„å¯ä¿®æ”¹å¯¹äºè¡¨ç¤ºä¸ºã€ŒåŒºé—´æœ€å€¼ã€ä¸”å¯¹åŒºé—´è¿›è¡Œã€ŒåŠ å‡ã€çš„æ›´æ–°æ“ä½œçš„æƒ…å†µï¼Œæˆ‘ä»¬åœ¨æ›´æ–°èŠ‚ç‚¹å€¼çš„æ—¶å€™ã€ä¸éœ€è¦âœ–ï¸å·¦å³å­©å­åŒºé—´å¶å­èŠ‚ç‚¹çš„æ•°é‡ (æ³¨æ„æ˜¯å¶å­èŠ‚ç‚¹çš„æ•°é‡)ã€ï¼›æˆ‘ä»¬åœ¨ä¸‹æ¨æ‡’æƒ°æ ‡è®°çš„æ—¶å€™ã€éœ€è¦ç´¯åŠ ã€ï¼ï¼ å¦‚é¢˜ç›® æˆ‘çš„æ—¥ç¨‹å®‰æ’è¡¨ Iã€æˆ‘çš„æ—¥ç¨‹å®‰æ’è¡¨ III æˆ‘çš„æ—¥ç¨‹å®‰æ’è¡¨ I123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566class Node { friend class MyCalendar; // å·¦å³å­©å­èŠ‚ç‚¹ Node *left, *right; // å½“å‰èŠ‚ç‚¹å€¼ï¼Œä»¥åŠæ‡’æƒ°æ ‡è®°çš„å€¼ int val, add;};class MyCalendar { public: MyCalendar():N(1e9), root(new Node()){ } bool book(int start, int end) { // å…ˆæŸ¥è¯¢è¯¥åŒºé—´æ˜¯å¦ä¸º 0 if (query(root, 0, N, start, end - 1) != 0) return false; // æ›´æ–°è¯¥åŒºé—´ update(root, 0, N, start, end - 1, 1); return true; } void update(Node* node, int start, int end, int l, int r, int val) { if (l &lt;= start &amp;&amp; end &lt;= r) { node -&gt; val += val; node -&gt; add += val; return ; } pushDown(node); int mid = (start + end) &gt;&gt; 1; if (l &lt;= mid) update(node -&gt; left, start, mid, l, r, val); if (r &gt; mid) update(node -&gt; right, mid + 1, end, l, r, val); pushUp(node); } int query(Node* node, int start, int end, int l, int r) { if (l &lt;= start &amp;&amp; end &lt;= r) return node -&gt; val; pushDown(node); int mid = (start + end) &gt;&gt; 1, ans = 0; if (l &lt;= mid) ans = query(node -&gt; left, start, mid, l, r); if (r &gt; mid) ans = max(ans, query(node -&gt; right, mid + 1, end, l, r)); return ans; } // *************** ä¸‹é¢æ˜¯æ¨¡ç‰ˆ *************** private: int N; Node* root; void pushUp(Node* node) { // æ¯ä¸ªèŠ‚ç‚¹å­˜çš„æ˜¯å½“å‰åŒºé—´çš„æœ€å¤§å€¼ node -&gt; val = max(node -&gt; left -&gt; val, node -&gt; right -&gt; val); } void pushDown(Node* node) { if (node -&gt; left == nullptr) node -&gt; left = new Node(); if (node -&gt; right == nullptr) node -&gt; right = new Node(); if (node -&gt; add == 0) return ; node -&gt; left -&gt; val += node -&gt; add; node -&gt; right -&gt; val += node -&gt; add; node -&gt; left -&gt; add += node -&gt; add; node -&gt; right -&gt;add += node -&gt; add; node -&gt; add = 0; }};/** * Your MyCalendar object will be instantiated and called as such: * MyCalendar* obj = new MyCalendar(); * bool param_1 = obj-&gt;book(start,end); */","link":"/2022/07/09/segmentTree/"},{"title":"CentOS Stream 9 å•èŠ‚ç‚¹ Slurm é›†ç¾¤éƒ¨ç½²æŒ‡å—","text":"æœ¬æ–‡æä¾› CentOS Stream 9 å•èŠ‚ç‚¹ç¯å¢ƒä¸‹å®‰è£…é…ç½® Slurmï¼ˆå« slurmctld + slurmdï¼‰çš„æ ‡å‡†æµç¨‹ï¼Œé€‚ç”¨äºå¼€å‘ã€æµ‹è¯•åŠå•æœºè°ƒåº¦åœºæ™¯ã€‚ ä¸€ã€ç¯å¢ƒå‡è®¾ä¸ç›®æ ‡æ¶æ„1. ç¯å¢ƒå‡è®¾ æ“ä½œç³»ç»Ÿï¼šCentOS Stream 9ï¼ˆæœ€å°åŒ–æˆ–æ ‡å‡†å®‰è£…ï¼‰ ä¸»æœºåï¼šnode1 IPï¼š192.168.1.10ï¼ˆç¤ºä¾‹ï¼‰ è§’è‰²ï¼š æ§åˆ¶èŠ‚ç‚¹ï¼ˆControllerï¼‰ï¼šnode1 è®¡ç®—èŠ‚ç‚¹ï¼ˆComputeï¼‰ï¼šnode1 2. Slurm ç»„ä»¶ slurmctldï¼šæ§åˆ¶å®ˆæŠ¤è¿›ç¨‹ slurmdï¼šè®¡ç®—èŠ‚ç‚¹å®ˆæŠ¤è¿›ç¨‹ slurmdbdï¼šå•æœºæµ‹è¯•é€šå¸¸ä¸éœ€è¦ äºŒã€ç³»ç»ŸåŸºç¡€å‡†å¤‡1. è®¾ç½®ä¸»æœºåä¸ hosts1234hostnamectl set-hostname node1cat &gt;&gt; /etc/hosts &lt;&lt;EOF192.168.1.10 node1EOF 2. å…³é—­é˜²ç«å¢™ï¼ˆæµ‹è¯•ç¯å¢ƒå»ºè®®ï¼‰1systemctl disable --now firewalld 3. å…³é—­ SELinux12sed -i 's/^SELINUX=.*/SELINUX=disabled/' /etc/selinux/configsetenforce 0 ä¸‰ã€å®‰è£… Slurm åŠä¾èµ–CentOS 9 å®˜æ–¹ä»“åº“å·²åŒ…å« Slurmï¼Œæ— éœ€è‡ªè¡Œç¼–è¯‘ã€‚ 1. å®‰è£… EPEL1dnf install -y epel-release 2. å®‰è£… Slurm1dnf install -y slurm slurm-slurmd slurm-slurmctld munge å››ã€é…ç½® Mungeï¼ˆSlurm è®¤è¯æ ¸å¿ƒï¼‰Slurm å¼ºä¾èµ– munge è¿›è¡ŒèŠ‚ç‚¹è®¤è¯ã€‚ 1. åˆ›å»º munge key1/usr/sbin/create-munge-key 2. è®¾ç½®æƒé™12chown -R munge:munge /etc/munge /var/lib/munge /var/log/mungechmod 400 /etc/munge/munge.key 3. å¯åŠ¨ munge1systemctl enable --now munge 4. éªŒè¯ munge1munge -n | unmunge æ­£å¸¸åº”çœ‹åˆ°ï¼š 1STATUS: Success (0) äº”ã€åˆ›å»º Slurm ç”¨æˆ·ä¸ç›®å½•1. åˆ›å»º slurm ç”¨æˆ·1useradd -r -s /sbin/nologin slurm 2. åˆ›å»ºå¿…è¦ç›®å½•123mkdir -p /var/spool/slurm/{ctld,d}mkdir -p /var/log/slurmchown -R slurm:slurm /var/spool/slurm /var/log/slurm å…­ã€é…ç½® slurm.confï¼ˆæ ¸å¿ƒï¼‰1. ç”ŸæˆåŸºç¡€æ¨¡æ¿1cp /etc/slurm/slurm.conf.example /etc/slurm/slurm.conf 2. ç¼–è¾‘ /etc/slurm/slurm.confæœ€å°å¯ç”¨å•æœºé…ç½®ç¤ºä¾‹ï¼š slurm.conf ç¤ºä¾‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687############################# åŸºæœ¬é›†ç¾¤ä¿¡æ¯############################ClusterName=single_clusterSlurmctldHost=node1(127.0.0.1)SlurmUser=slurmSlurmdUser=root############################# ç«¯å£############################SlurmctldPort=6817SlurmdPort=6818############################# çŠ¶æ€ä¸æ—¥å¿—############################StateSaveLocation=/var/spool/slurm/ctldSlurmdSpoolDir=/var/spool/slurm/dSlurmctldLogFile=/var/log/slurm/slurmctld.logSlurmdLogFile=/var/log/slurm/slurmd.log############################# è®¤è¯############################AuthType=auth/mungeCryptoType=crypto/munge############################# è°ƒåº¦å™¨############################SchedulerType=sched/backfillSchedulerParameters=bf_continue,bf_interval=30############################# èµ„æºé€‰æ‹©ï¼ˆå…³é”®ï¼‰############################SelectType=select/cons_resSelectTypeParameters=CR_Core_Memory############################# cgroupï¼ˆç”Ÿäº§å¿…å¼€ï¼‰############################ProctrackType=proctrack/cgroupTaskPlugin=task/cgroup# TaskPluginParam=SchedJobAcctGatherType=jobacct_gather/cgroup############################# è¿›ç¨‹è·Ÿè¸ª / æ¸…ç†############################KillOnBadExit=1ReturnToService=2############################# è¶…æ—¶############################SlurmctldTimeout=300SlurmdTimeout=300############################# èŠ‚ç‚¹å®šä¹‰ï¼ˆæŒ‰çœŸå®èµ„æºï¼‰############################NodeName=node1 \\ CPUs=56 \\ RealMemory=128027 \\ Sockets=2 \\ CoresPerSocket=28 \\ ThreadsPerCore=1 \\ Gres=gpu:V100:8 \\ State=UNKNOWNGresTypes=gpu############################# åˆ†åŒºå®šä¹‰############################PartitionName=debug \\ Nodes=node1 \\ Default=YES \\ MaxTime=1:00:00 \\ State=UPPartitionName=normal \\ Nodes=node1 \\ MaxTime=7-00:00:00 \\ State=UP cgroup.conf ç¤ºä¾‹ï¼š 12345678910111213141516171819202122##### Slurm cgroup support configuration file## See man slurm.conf and man cgroup.conf for further# information on cgroup configuration parameters#--CgroupMountpoint=/sys/fs/cgroupCgroupAutomount=yesConstrainCores=yesConstrainRAMSpace=yesConstrainSwapSpace=yesConstrainDevices=yesAllowedRAMSpace=100AllowedSwapSpace=0MaxRAMPercent=98MaxSwapPercent=0MinRAMSpace=30 æ³¨æ„ï¼š CPUs å’Œ RealMemory æ ¹æ® lscpuã€free -m å®é™…è°ƒæ•´ NodeName å¿…é¡»ä¸ hostname å®Œå…¨ä¸€è‡´ ä¸ƒã€å¯åŠ¨ Slurm æœåŠ¡1. å¯åŠ¨ slurmctld1systemctl enable --now slurmctld 2. å¯åŠ¨ slurmd1systemctl enable --now slurmd å…«ã€éªŒè¯ Slurm çŠ¶æ€1. æŸ¥çœ‹èŠ‚ç‚¹çŠ¶æ€1sinfo æœŸæœ›è¾“å‡ºï¼š 12PARTITION AVAIL TIMELIMIT NODES STATE NODELISTdebug up infinite 1 idle node1 2. æŸ¥çœ‹èŠ‚ç‚¹è¯¦æƒ…1scontrol show node node1 ä¹ã€æäº¤æµ‹è¯•ä»»åŠ¡1. äº¤äº’å¼ä»»åŠ¡1srun -n 1 hostname 2. æ‰¹å¤„ç†ä»»åŠ¡12345678910cat &gt; test.sh &lt;&lt;EOF#!/bin/bash#SBATCH -n 1#SBATCH -o test.outhostnamesleep 10EOFsbatch test.sh æŸ¥çœ‹ä»»åŠ¡ï¼š 1squeue åã€å¸¸è§é—®é¢˜æ’æŸ¥1. èŠ‚ç‚¹çŠ¶æ€ä¸º DOWN1scontrol update NodeName=node1 State=RESUME 2. æŸ¥çœ‹æ—¥å¿—12journalctl -u slurmctld -fjournalctl -u slurmd -f 3. Munge é”™è¯¯ ç¡®è®¤ munge æ­£åœ¨è¿è¡Œ /etc/munge/munge.key æƒé™å¿…é¡»æ˜¯ 400 åä¸€ã€slurmdbd éœ€æ±‚åˆ†æ åœºæ™¯ æ˜¯å¦éœ€è¦ å•æœºæµ‹è¯• å¦ ä½œä¸šè®¡è´¹/ç»Ÿè®¡ æ˜¯ å¤šç”¨æˆ·å®¡è®¡ æ˜¯ å¦‚éœ€ä»¥ä¸‹æ‰©å±•é…ç½®ï¼Œè¯·è¯´æ˜ä½¿ç”¨åœºæ™¯ï¼š CentOS 9 + slurmdbd + MariaDB é…ç½® GPUï¼ˆNVIDIAï¼‰èŠ‚ç‚¹é…ç½® cgroup èµ„æºéš”ç¦»è¯¦ç»†é…ç½® å¤šèŠ‚ç‚¹é›†ç¾¤æ‰©å±•æ–¹æ¡ˆ åäºŒã€GPU é…ç½®ï¼ˆV100 ç¤ºä¾‹ï¼‰1. ç¡®è®¤ GPU è®¾å¤‡1ls -l /dev/nvidia* è¾“å‡ºç¤ºä¾‹ï¼š 1234/dev/nvidia0/dev/nvidia1/dev/nvidiactl/dev/nvidia-uvm 2. é…ç½® gres.conf1vi /etc/slurm/gres.conf ç¤ºä¾‹ï¼ˆ2 Ã— V100ï¼‰ï¼š 12NodeName=node1 Name=gpu Type=V100 File=/dev/nvidia0NodeName=node1 Name=gpu Type=V100 File=/dev/nvidia1 è¦ç‚¹ï¼š Type=V100 æ˜¯ --gres=gpu:V100:x å‚æ•°çš„å…³é”® NodeName å¿…é¡»å’Œ slurm.conf å®Œå…¨ä¸€è‡´ 3. ä¿®æ”¹ slurm.confåœ¨èŠ‚ç‚¹å®šä¹‰ä¸­æ·»åŠ  GPU èµ„æºï¼š 12345NodeName=node1 \\ CPUs=64 \\ RealMemory=125000 \\ Gres=gpu:V100:2 \\ State=UNKNOWN 4. å¯ç”¨ GPU éš”ç¦»ç¡®è®¤ /etc/slurm/cgroup.conf åŒ…å«ï¼š 1ConstrainDevices=yes é‡è¦ï¼šæœªå¯ç”¨éš”ç¦»ä¼šå¯¼è‡´æ‰€æœ‰ä½œä¸šéƒ½èƒ½è®¿é—®å…¨éƒ¨ GPU 5. é‡å¯æœåŠ¡1systemctl restart slurmctld slurmd åä¸‰ã€GPU åŠŸèƒ½éªŒè¯1. æŸ¥çœ‹èŠ‚ç‚¹èµ„æº1scontrol show node node1 åº”åŒ…å«ï¼š 12Gres=gpu:V100:2GresUsed=0 2. æŸ¥çœ‹ GPU è§†å›¾1sinfo -o &quot;%N %G&quot; è¾“å‡ºç¤ºä¾‹ï¼š 1node1 gpu:V100:2 åå››ã€GPU ä½œä¸šç¤ºä¾‹1. äº¤äº’å¼ä»»åŠ¡ï¼ˆå• GPUï¼‰12srun --gres=gpu:V100:1 --pty bashnvidia-smi # åº”åªçœ‹åˆ°1å¼ GPU 2. æ‰¹å¤„ç†ä»»åŠ¡12345678910111213cat &gt; gpu_test.sh &lt;&lt;'EOF'#!/bin/bash#SBATCH -J gpu_test#SBATCH --gres=gpu:V100:1#SBATCH --cpus-per-task=4#SBATCH --mem=16G#SBATCH -o gpu_test.outnvidia-smisleep 30EOFsbatch gpu_test.sh 3. å¤š GPU ä»»åŠ¡1srun --gres=gpu:V100:2 --pty bash åäº”ã€å¸¸è§ GPU é—®é¢˜âŒ ä½œä¸šå†…èƒ½çœ‹åˆ°æ‰€æœ‰ GPUåŸå› ï¼š ConstrainDevices=no æœªä½¿ç”¨ task/cgroup ä¿®å¤ï¼š 12ConstrainDevices=yesTaskPlugin=task/cgroup âŒ æäº¤ GPU ä½œä¸šä¸€ç›´æ’é˜Ÿ12squeuescontrol show job &lt;jobid&gt; å¸¸è§åŸå› ï¼š GPU å·²è¢«å ç”¨ è¯·æ±‚çš„ GPU ç±»å‹é”™è¯¯ï¼ˆå¦‚å†™æˆ A100ï¼‰ âŒ GPU è§„æ ¼æŒ‡å®šå·®å¼‚ å†™æ³• è¡Œä¸º --gres=gpu:1 ä½¿ç”¨ä»»æ„ GPU --gres=gpu:V100:1 ä»…ä½¿ç”¨ V100 ç”Ÿäº§ç¯å¢ƒå»ºè®®å§‹ç»ˆæŒ‡å®š GPU ç±»å‹ åå…­ã€ç”Ÿäº§ç¯å¢ƒå»ºè®®1. èµ„æºé™åˆ¶åœ¨åˆ†åŒºé…ç½®ä¸­æ·»åŠ ï¼š 1DefMemPerGPU=32000 # æ¯GPUåˆ†é…32GBå†…å­˜ é¿å… GPU ä½œä¸šæŠ¢å å…¨éƒ¨å†…å­˜ 2. èŠ‚ç‚¹éš”ç¦»æœªæ¥æ‰©å±•å¤šèŠ‚ç‚¹æ—¶ï¼Œä½¿ç”¨ç‹¬ç«‹åˆ†åŒºåŒºåˆ† GPU/CPU èŠ‚ç‚¹ æ€»ç»“V100 GPU çš„é…ç½®éœ€è¦åŒæ—¶æ»¡è¶³ï¼š æ­£ç¡®çš„ gres.conf å®šä¹‰ slurm.conf ä¸­çš„èµ„æºå£°æ˜ cgroup.conf çš„è®¾å¤‡éš”ç¦» æ ¹æ®éœ€æ±‚å¯è¿›ä¸€æ­¥é…ç½®ï¼š MIG / å¤š GPU æ··åˆè°ƒåº¦ GPU + CPU ç»‘æ ¸ï¼ˆNUMA äº²å’Œï¼‰ GPU åˆ†åŒº / QOS å¤šç”¨æˆ· GPU è®¡è´¹","link":"/2025/02/02/slurm-server/"},{"title":"Subtreeä»“åº“æ·»åŠ ","text":"Step 1åˆå§‹åŒ–gitä»“åº“git initæ·»åŠ README.mdæ–‡ä»¶git add .git commit -m â€œInitâ€ Step 2æ·»åŠ git subtreeä»“åº“git remote add label git fetch labelgit add subtree â€“prefix= label/","link":"/2025/02/02/subtree/"},{"title":"PICæ¨¡æ‹Ÿåå¤„ç†","text":"PICæ¨¡æ‹Ÿåå¤„ç†è½¯ä»¶postpicåœ°å€https://github.com/skuschel/postpic.gitç¤ºä¾‹https://github.com/skuschel/postpic-examples.git VisualPICå¯è§†åŒ–GUIç¨‹åºhttps://github.com/AngelFP/VisualPIC.git@dev PICViewerPICViewer is a visualization GUI implemented on PyQt.dependency 1https://github.com/yt-project/yt.git Install 1https://bitbucket.org/ecp_warpx/picviewer/","link":"/2025/02/02/postpic/"},{"title":"Two Forms of Pre-rendering","text":"Next.js has two forms of pre-rendering: Static Generation and Server-side Rendering. The difference is in when it generates the HTML for a page. Static Generation is the pre-rendering method that generates the HTML at build time. The pre-rendered HTML is then reused on each request. Server-side Rendering is the pre-rendering method that generates the HTML on each request. Importantly, Next.js lets you choose which pre-rendering form to use for each page. You can create a â€œhybridâ€ Next.js app by using Static Generation for most pages and using Server-side Rendering for others.","link":"/2020/01/01/pre-rendering/"},{"title":"è¿œç¨‹è¿æ¥ä¸å”¤é†’","text":"VTK and Paraviewvtk examples:https://examples.vtk.org/site/Python/IO/WriteXMLLinearCells/ source:https://github.com/Kitware/vtk-examples","link":"/2023/08/10/vtk/"},{"title":"Frequency moved undulator","text":"Smilei or EPOCHMark the oscillate electrons, and save the field produced by them. Then sparated them from the total electric field and save to a new file. å…‰æ³¢è¡å™¨æ¨å¯¼å‡è®¾å¹³é¢æ³¢æ¿€å…‰æ–¹å‘ä¸º$\\hat k = \\frac{\\mathbf{k}}{k_L}$ï¼Œåˆ™ $B = \\frac{(\\hat k \\times E)}{c}$ï¼Œç”µå­åœ¨æ¿€å…‰åœºä¸­è¿åŠ¨æ–¹ç¨‹å†™ä¸ºï¼š $$\\frac{d}{dt}(\\gamma mc \\beta) = -e(E + v \\times B)$$ $$\\frac{d}{dt}(\\gamma mc \\beta) = -e[E + \\beta \\times (\\hat k \\times E)] = -e[E + (\\beta \\cdot E)\\hat k - (\\beta \\cdot \\hat k)E]$$ æˆ‘ä»¬å‡è®¾æ¿€å…‰æ²¿ç€xæ–¹å‘åæŒ¯ï¼Œ$E = E_0 \\sin(\\omega_Lt âˆ’ k \\cdot x)\\hat x$ï¼Œæ²¿ç€zæ–¹å‘ä¼ æ’­ï¼Œä¸zè½´å‘ˆå¤¹è§’$\\varphi$ï¼Œæ³¢çŸ¢$k = k_L(0, -\\sin \\varphi, +\\cos \\varphi)$ï¼Œå¹¶ä¸” $\\omega_L = ck_L$ã€‚è¿åŠ¨æ–¹ç¨‹å†™ä¸ºï¼š $$\\frac{d}{dt}(\\gamma mc \\beta) = -eE_0\\sin(ck_Lt - \\mathbf{k} \\cdot x)[1 - (\\hat k \\cdot \\beta)] = \\frac{eE_0}{ck_L}\\frac{d}{dt}\\cos(ck_Lt - \\mathbf{k} \\cdot x)$$ æ–¹ç¨‹è¡¨æ˜æ°´å¹³æ–¹å‘åŠ¨é‡å®ˆæ’ï¼Œé€šè¿‡ç§¯åˆ†å¯ä»¥å¾ˆå®¹æ˜“å¾—å‡ºï¼Œ $$\\beta_x = \\frac{eE_0}{\\gamma mc^2k_L}\\cos(ck_Lt - \\mathbf{k}\\cdot x)$$ æ³¢è¡å™¨å‚æ•°ä¸º$K = \\frac{eE_0}{mc^2k_L}$ï¼Œå¯¹äºUndulatorï¼Œ $K&lt;&lt;1$ï¼Œ$t \\approx c/\\beta_z$ï¼Œæ¨ªå‘æŒ¯åŠ¨é€Ÿåº¦ä¸º$\\cos(k_L(1/\\overline{\\beta}_z - \\cos\\varphi)z + k_Ly\\sin\\varphi)$ï¼Œåˆ™æ³¢è¡å™¨å‘¨æœŸä¸ºï¼š $$\\lambda_u \\rightarrow \\frac{\\overline{\\beta}_z\\lambda_L}{1 - \\overline{\\beta}_z\\cos\\varphi}$$ å°†æ³¢è¡å™¨å‘¨æœŸå’Œå‚æ•°Kå¸¦å…¥æ³¢è¡å™¨è¾å°„å…¬å¼, $$\\frac{\\lambda_1(\\phi)}{c} = \\frac{\\lambda_u}{c}[\\frac{1 + K^2/(4\\gamma^2)}{\\beta} - (1 - \\frac{\\phi^2}{2})] \\approx \\frac{\\lambda_u}{c}\\frac{1 + K^2/2 + \\gamma^2\\phi^2}{2\\gamma^2}$$ åŒæ­¥è¾å°„å…±æŒ¯æ³¢é•¿ä¸º $$\\lambda = \\frac{1 + K^2/2}{2\\gamma^2}\\frac{\\lambda_L}{1 - \\overline{\\beta}_z\\cos\\varphi}$$ å½“æ»¡è¶³$\\varphi \\rightarrow 0, K &lt;&lt; 1$(undulatorçš„å‡è®¾)æ—¶ $$\\lambda \\rightarrow \\lambda_L$$ æ—¶é—´æ”¶ç¼©æ•ˆåº”å‡è®¾$t^{â€˜}$ä¸ºç²’å­é™æ­¢åæ ‡ç³»ï¼Œåˆ™ $1 - \\beta(t^{â€˜})\\cos\\phi(t^{â€˜})$ ä¸ºæ—¶é—´æ”¶ç¼©å› å­ï¼Œå¯¹äºç›¸å¯¹è®ºç”µå­ï¼Œ $$\\beta = \\sqrt{1 - \\frac{1}{\\gamma^2}} \\approx 1 - \\frac{1}{1\\gamma^2}$$ å¯¹äº$\\gamma &gt;&gt; 1$ï¼Œ$\\phi &lt;&lt; 1$ $$1 - \\beta \\cos\\phi \\approx \\frac{1}{2}(\\frac{1}{\\gamma^2} + \\phi^2)$$","link":"/2022/09/15/undulator/"}],"tags":[{"name":"Linux","slug":"Linux","link":"/tags/Linux/"},{"name":"cgroup","slug":"cgroup","link":"/tags/cgroup/"},{"name":"èµ„æºç®¡ç†","slug":"èµ„æºç®¡ç†","link":"/tags/%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86/"},{"name":"Slurm","slug":"Slurm","link":"/tags/Slurm/"},{"name":"HPC","slug":"HPC","link":"/tags/HPC/"},{"name":"é›†ç¾¤ç®¡ç†","slug":"é›†ç¾¤ç®¡ç†","link":"/tags/%E9%9B%86%E7%BE%A4%E7%AE%A1%E7%90%86/"}],"categories":[],"pages":[{"title":"about","text":"Testit is a test","link":"/about/index.html"}]}